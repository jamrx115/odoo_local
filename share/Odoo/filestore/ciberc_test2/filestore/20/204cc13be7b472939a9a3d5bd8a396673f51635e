
/* /website/static/src/js/website.tour.rte.js defined in bundle 'website.assets_editor' */
odoo.define('website.tour.rte',function(require){'use strict';var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('rte_translator',{test:true,wait_for:base.ready()},[{content:"click on Add a language",trigger:'.js_language_selector a:has(i.fa)',},{content:"select french",trigger:'select[name="lang"]',run:'text "fr_BE"',},{content:"load french",trigger:'.modal-footer button:first',extra_trigger:'.modal select[name="lang"]:propValueContains(fr_BE)',},{content:"go to english version",trigger:'.js_language_selector a[data-lang="en_US"]',extra_trigger:'html[lang*="fr"]',},{content:"Open new page menu",trigger:'#oe_main_menu_navbar a[data-action=new_page]',extra_trigger:'a[data-action="edit"]',},{content:"click on new page",trigger:'a[data-action="new_page"]',},{content:"insert page name",trigger:'#editor_new_page input[type="text"]',run:'text rte_translator',},{content:"create page",trigger:'button.btn-continue',extra_trigger:'input[type="text"]:propValue(rte_translator)',},{content:"drop a snippet",trigger:"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail",run:'drag_and_drop',},{content:"change content",trigger:'.oe_overlay_options .oe_options:visible',run:function(){$("#wrap p:first").replaceWith('<p>Write one or <font style="background-color: yellow;">two paragraphs <b>describing</b></font> your product or\
                        <font style="color: rgb(255, 0, 0);">services</font>. To be successful your content needs to be\
                        useful to your <a href="/999">readers</a>.</p> <input placeholder="test translate placeholder"/>\
                        <p>&lt;b&gt;&lt;/b&gt; is an HTML&nbsp;tag &amp; is empty</p>');$("#wrap img").attr("title","test translate image title");}},{content:"save",trigger:'button[data-action=save]',extra_trigger:'#wrap p:first b',},{content:"click on french version",trigger:'.js_language_selector a[data-lang="fr_BE"]',extra_trigger:'html[lang*="en"]:not(:has(button[data-action=save]))',},{content:"translate",trigger:'html:not(:has(#wrap p span)) .o_menu_systray a[data-action="translate"]',},{content:"close modal",trigger:'button[data-action="activate"]',},{content:"check if translation is activate",trigger:'[data-oe-translation-id]',},{content:"translate text",trigger:'#wrap p font:first',run:function(action_helper){action_helper.text('translated french text');this.$anchor.trigger('keydown');},},{content:"translate text with special char",trigger:'#wrap input + p span:first',run:function(action_helper){action_helper.click();this.$anchor.prepend('&lt;{translated}&gt;').trigger('keydown');},},{content:"click on input",trigger:'input:first',extra_trigger:'#wrap .o_dirty font:first:contains(translated french text)',run:'click',},{content:"translate placeholder",trigger:'input:first',run:'text test french placeholder',},{content:"close modal",trigger:'button.o_save_button',extra_trigger:'.modal input:propValue(test french placeholder)',},{content:"save translation",trigger:'button[data-action=save]',},{content:"check: content is translated",trigger:'#wrap p font:first:contains(translated french text)',run:function(){},},{content:"check: content with special char is translated",trigger:"#wrap input + p:contains(<{translated}><b></b> is an HTML\xa0tag & )",run:function(){},},{content:"check: placeholder translation",trigger:'input[placeholder="test french placeholder"]',run:function(){},},{content:"return to english version",trigger:'.js_language_selector a[data-lang="en_US"]',extra_trigger:'html[lang*="fr"]:not(:has(#wrap p span))',},{content:"edit english version",trigger:'a[data-action=edit]',extra_trigger:'body:not(:has(#wrap p font:first:containsExact(paragraphs <b>describing</b>)))',},{content:"select text",extra_trigger:'button[data-action=save]',trigger:'#wrap p',run:function(action_helper){action_helper.click();var el=this.$anchor[0];var evt=document.createEvent("MouseEvents");$.summernote.core.range.create(el.childNodes[2],6,el.childNodes[2],13).select();evt.initMouseEvent('mouseup',true,true,window,0,0,0,0,0,false,false,false,false,0,el);el.dispatchEvent(evt);},},{content:"underline",trigger:'.note-air-popover button[data-event="underline"]',},{content:"save new change",trigger:'button[data-action=save]',extra_trigger:'#wrap p u',},{content:"return in french",trigger:'html[lang="en-US"] .js_language_selector a[data-lang="fr_BE"]',extra_trigger:'html[lang*="en"]:not(:has(button[data-action=save]))',},{content:"check bis: content is translated",trigger:'#wrap p font:first:contains(translated french text)',extra_trigger:'body:not(:has(button[data-action=save]))',},{content:"check bis: placeholder translation",trigger:'input[placeholder="test french placeholder"]',},]);});;

/* /website/static/src/js/website.editor.js defined in bundle 'website.assets_editor' */
odoo.define('website.editor',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var base=require('web_editor.base');var editor=require('web_editor.editor');var widget=require('web_editor.widget');var website=require('website.website');var qweb=core.qweb;var _t=core._t;ajax.loadXML('/website/static/src/xml/website.editor.xml',qweb);website.TopBar.include({events:{'click [data-action="edit"]':'edit',},start:function(){$("#wrapwrap").find("[data-oe-model] .oe_structure.oe_empty, [data-oe-model].oe_structure.oe_empty, [data-oe-type=html]:empty").filter(".oe_not_editable").filter(".oe_no_empty").addClass("oe_empty");if(location.search.indexOf("enable_editor")>=0&&$('html').attr('lang').match(/en[-_]US/)){this.$el.addClass('editing_mode');this.delayed_hide();}
return this._super.apply(this,arguments);},edit:function(){this.$('button[data-action=edit]').prop('disabled',true);this.$el.addClass('editing_mode');editor.editor_bar=new editor.Class(this);editor.editor_bar.prependTo(document.body);$('.o_homepage_editor_welcome_message').remove();this.delayed_hide();},delayed_hide:function(){_.delay((function(){this.do_hide();}).bind(this),800);},});website.TopBarCustomize=Widget.extend({events:{'click > ul a[data-view-id]':'do_customize',},start:function(){this.view_name=$(document.documentElement).data('view-xmlid');if(!this.view_name){this.$el.hide();}
if(this.$el.is(".open")){this.load_menu();}else{this.$el.one("mousedown","> a.dropdown-toggle",this.load_menu.bind(this));}},load_menu:function(){var $menu=this.$el.children("ul");ajax.jsonRpc('/website/customize_template_get','call',{key:this.view_name,full:false}).then(function(result){var current_group="";_.each(result,function(item){if(current_group!==item.inherit_id[1]){current_group=item.inherit_id[1];$menu.append("<li class=\"dropdown-header\">"+current_group+"</li>");}
var $li=$('<li/>',{role:'presentation'}).append($('<a/>',{href:'#','data-view-id':item.id,role:'menuitem'}).append(qweb.render('web_editor.components.switch',{id:'switch-'+item.id,label:item.name})));$li.find('input').prop('checked',!!item.active);$menu.append($li);});});},do_customize:function(e){e.preventDefault();var view_id=$(e.currentTarget).data('view-id');return ajax.jsonRpc('/web/dataset/call_kw','call',{model:'ir.ui.view',method:'toggle',args:[[parseInt(view_id,10)]],kwargs:{context:base.get_context()}}).then(function(){window.location.reload();});},});website.TopBar.include({start:function(){this.customize_menu=new website.TopBarCustomize();var def=this.customize_menu.attachTo($('#customize-menu'));return $.when(this._super(),def);}});widget.LinkDialog.include({bind_data:function(){var self=this;var href=this.data.url;var last;this.$('#link-page').select2({minimumInputLength:1,placeholder:_t("New or existing page"),query:function(q){if(q.term===last)return;last=q.term;$.when(self.page_exists(q.term),self.fetch_pages(q.term)).then(function(exists,results){var rs=_.map(results,function(r){return{id:r.loc,text:r.loc,};});if(!exists){rs.push({create:true,id:q.term,text:_.str.sprintf(_t("Create page '%s'"),q.term),});}
q.callback({more:false,results:rs});},function(){q.callback({more:false,results:[]});});},});if(href){this.page_exists(href).then(function(exist){if(exist){self.$('#link-page').select2('data',{'id':href,'text':href}).change();}else{self.$('input.url').val(href).change();self.$('input.window-new').closest("div").show();}});}
return this._super();},get_data_buy_url:function(def,$e,isNewWindow,label,classes,test){var val=$e.val();if(val&&val.length&&$e.hasClass('page')){var data=$e.select2('data');if(!data.create||test){def.resolve(data.id,isNewWindow,label||data.text,classes);}else{$.get(_.str.sprintf('/website/add/%s?noredirect=1',encodeURI(data.id))).then(function(response){def.resolve(response,isNewWindow,label,classes);});}}else{return this._super.apply(this,arguments);}},changed:function(e){this.$('.url-source').filter(':input').not($(e.target)).val('').filter(function(){return!!$(this).data('select2');}).select2('data',null);this._super(e);},call:function(method,args,kwargs){var self=this;var req=method+'_req';if(this[req]){this[req].abort();}
return this[req]=ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:method,args:args,kwargs:kwargs,}).always(function(){self[req]=null;});},page_exists:function(term){return this.call('page_exists',[null,term],{context:base.get_context(),});},fetch_pages:function(term){return this.call('search_pages',[null,term],{limit:100,context:base.get_context(),});},});base.ready().then(function(){if(location.search.indexOf("enable_editor")<0&&$(".editor_enable").length===0){var $wrap=$("#wrapwrap.homepage #wrap");if($wrap.length&&$wrap.html().trim()===""){var $welcome_message=$(qweb.render("website.homepage_editor_welcome_message"));$welcome_message.css("min-height",$wrap.parent("main").height()-($wrap.outerHeight(true)-$wrap.height()));$wrap.empty().append($welcome_message);}}});});;

/* /website/static/lib/jQuery.transfo.js defined in bundle 'website.assets_editor' */
(function($){'use strict';var rad=Math.PI/180;var methods={init:function(settings){return this.each(function(){var $this=$(this),transfo=$this.data('transfo');if(!transfo){_init($this,settings);}else{_overwriteOptions($this,transfo,settings);_targetCss($this,transfo);}});},destroy:function(){return this.each(function(){var $this=$(this);if($this.data('transfo')){_destroy($this);}});},reset:function(){return this.each(function(){var $this=$(this);if($this.data('transfo')){_reset($this);}});},toggle:function(){return this.each(function(){var $this=$(this);var transfo=$this.data('transfo');if(transfo){transfo.settings.hide=!transfo.settings.hide;_showHide($this,transfo);}});},hide:function(){return this.each(function(){var $this=$(this);var transfo=$this.data('transfo');if(transfo){transfo.settings.hide=true;_showHide($this,transfo);}});},show:function(){return this.each(function(){var $this=$(this);var transfo=$this.data('transfo');if(transfo){transfo.settings.hide=false;_showHide($this,transfo);}});},settings:function(){if(this.length>1){this.map(function(){var $this=$(this);return $this.data('transfo')&&$this.data('transfo').settings;});}
return this.data('transfo')&&$this.data('transfo').settings;},center:function(){if(this.length>1){this.map(function(){var $this=$(this);return $this.data('transfo')&&$this.data('transfo').$center.offset();});}
return this.data('transfo')&&this.data('transfo').$center.offset();}};$.fn.transfo=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.transfo');}
return false;};function _init($this,settings){var transfo={};$this.data('transfo',transfo);transfo.settings=settings;var css="box-sizing: border-box; position: absolute; background-color: #fff; border: 1px solid #ccc; width: 8px; height: 8px; margin-left: -4px; margin-top: -4px;";transfo.$markup=$(''
+'<div class="transfo-container">'
+'<div class="transfo-controls">'
+'<div style="cursor: crosshair; position: absolute; margin: -30px; top: 0; right: 0; padding: 1px 0 0 1px;" class="transfo-rotator">'
+'<span class="fa-stack fa-lg">'
+'<i class="fa fa-circle fa-stack-2x"></i>'
+'<i class="fa fa-repeat fa-stack-1x fa-inverse"></i>'
+'</span>'
+'</div>'
+'<div style="'+css+'top: 0%; left: 0%; cursor: nw-resize;" class="transfo-scaler-tl"></div>'
+'<div style="'+css+'top: 0%; left: 100%; cursor: ne-resize;" class="transfo-scaler-tr"></div>'
+'<div style="'+css+'top: 100%; left: 100%; cursor: se-resize;" class="transfo-scaler-br"></div>'
+'<div style="'+css+'top: 100%; left: 0%; cursor: sw-resize;" class="transfo-scaler-bl"></div>'
+'<div style="'+css+'top: 0%; left: 50%; cursor: n-resize;" class="transfo-scaler-tc"></div>'
+'<div style="'+css+'top: 100%; left: 50%; cursor: s-resize;" class="transfo-scaler-bc"></div>'
+'<div style="'+css+'top: 50%; left: 0%; cursor: w-resize;" class="transfo-scaler-ml"></div>'
+'<div style="'+css+'top: 50%; left: 100%; cursor: e-resize;" class="transfo-scaler-mr"></div>'
+'<div style="'+css+'border: 0; width: 0px; height: 0px; top: 50%; left: 50%;" class="transfo-scaler-mc"></div>'
+'</div>'
+'</div>');transfo.$center=transfo.$markup.find(".transfo-scaler-mc");_setOptions($this,transfo);_overwriteOptions($this,transfo,settings);$("body").append(transfo.$markup);setTimeout(function(){_targetCss($this,transfo);},0);_bind($this,transfo);_targetCss($this,transfo);_stop_animation($this[0]);}
function _overwriteOptions($this,transfo,settings){transfo.settings=$.extend(transfo.settings,settings||{});}
function _stop_animation(target){target.style.webkitAnimationPlayState="paused";target.style.animationPlayState="paused";target.style.webkitTransition="none";target.style.transition="none";}
function _setOptions($this,transfo){var style=$this.attr("style")||"";var transform=style.match(/transform\s*:([^;]+)/)?style.match(/transform\s*:([^;]+)/)[1]:"";transfo.settings={};transfo.settings.angle=transform.indexOf('rotate')!=-1?parseFloat(transform.match(/rotate\(([^)]+)deg\)/)[1]):0;transfo.settings.scalex=transform.indexOf('scaleX')!=-1?parseFloat(transform.match(/scaleX\(([^)]+)\)/)[1]):1;transfo.settings.scaley=transform.indexOf('scaleY')!=-1?parseFloat(transform.match(/scaleY\(([^)]+)\)/)[1]):1;transfo.settings.style=style.replace(/[^;]*transform[^;]+/g,'').replace(/;+/g,';');$this.attr("style",transfo.settings.style);_stop_animation($this[0]);transfo.settings.pos=$this.offset();transfo.settings.height=$this.innerHeight();transfo.settings.width=$this.innerWidth();var translatex=transform.match(/translateX\(([0-9.-]+)(%|px)\)/);var translatey=transform.match(/translateY\(([0-9.-]+)(%|px)\)/);transfo.settings.translate="%";if(translatex&&translatex[2]==="%"){transfo.settings.translatexp=parseFloat(translatex[1]);transfo.settings.translatex=transfo.settings.translatexp/100*transfo.settings.width;}else{transfo.settings.translatex=translatex?parseFloat(translatex[1]):0;}
if(translatey&&translatey[2]==="%"){transfo.settings.translateyp=parseFloat(translatey[1]);transfo.settings.translatey=transfo.settings.translateyp/100*transfo.settings.height;}else{transfo.settings.translatey=translatey?parseFloat(translatey[1]):0;}
transfo.settings.css=window.getComputedStyle($this[0],null);transfo.settings.rotationStep=5;transfo.settings.hide=false;transfo.settings.callback=function(){};}
function _bind($this,transfo){function mousedown(event){_mouseDown($this,this,transfo,event);$(document).on("mousemove",mousemove).on("mouseup",mouseup);}
function mousemove(event){_mouseMove($this,this,transfo,event);}
function mouseup(event){_mouseUp($this,this,transfo,event);$(document).off("mousemove",mousemove).off("mouseup",mouseup);}
transfo.$markup.off().on("mousedown",mousedown);transfo.$markup.find(".transfo-controls >:not(.transfo-scaler-mc)").off().on("mousedown",mousedown);}
function _mouseDown($this,div,transfo,event){event.preventDefault();if(transfo.active||event.which!==1)return;var type="position",$e=$(div);if($e.hasClass("transfo-rotator"))type="rotator";else if($e.hasClass("transfo-scaler-tl"))type="tl";else if($e.hasClass("transfo-scaler-tr"))type="tr";else if($e.hasClass("transfo-scaler-br"))type="br";else if($e.hasClass("transfo-scaler-bl"))type="bl";else if($e.hasClass("transfo-scaler-tc"))type="tc";else if($e.hasClass("transfo-scaler-bc"))type="bc";else if($e.hasClass("transfo-scaler-ml"))type="ml";else if($e.hasClass("transfo-scaler-mr"))type="mr";transfo.active={"type":type,"scalex":transfo.settings.scalex,"scaley":transfo.settings.scaley,"pageX":event.pageX,"pageY":event.pageY,"center":transfo.$center.offset(),};}
function _mouseUp($this,div,transfo,event){transfo.active=null;}
function _mouseMove($this,div,transfo,event){event.preventDefault();if(!transfo.active)return;var settings=transfo.settings;var center=transfo.active.center;var cdx=center.left-event.pageX;var cdy=center.top-event.pageY;if(transfo.active.type=="rotator"){var ang,dang=Math.atan((settings.width*settings.scalex)/(settings.height*settings.scaley))/rad;if(cdy)ang=Math.atan(-cdx/cdy)/rad;else ang=0;if(event.pageY>=center.top&&event.pageX>=center.left)ang+=180;else if(event.pageY>=center.top&&event.pageX<center.left)ang+=180;else if(event.pageY<center.top&&event.pageX<center.left)ang+=360;ang-=dang;if(settings.scaley<0&&settings.scalex<0)ang+=180;if(!event.ctrlKey){settings.angle=Math.round(ang/transfo.settings.rotationStep)*transfo.settings.rotationStep;}else{settings.angle=ang;}
_targetCss($this,transfo);var new_center=transfo.$center.offset();var x=center.left-new_center.left;var y=center.top-new_center.top;var angle=ang*rad;settings.translatex+=x*Math.cos(angle)-y*Math.sin(-angle);settings.translatey+=-x*Math.sin(angle)+y*Math.cos(-angle);}
else if(transfo.active.type=="position"){var angle=settings.angle*rad;var x=event.pageX-transfo.active.pageX;var y=event.pageY-transfo.active.pageY;transfo.active.pageX=event.pageX;transfo.active.pageY=event.pageY;var dx=x*Math.cos(angle)-y*Math.sin(-angle);var dy=-x*Math.sin(angle)+y*Math.cos(-angle);settings.translatex+=dx;settings.translatey+=dy;}
else if(transfo.active.type.length===2){var angle=settings.angle*rad;var dx=cdx*Math.cos(angle)-cdy*Math.sin(-angle);var dy=-cdx*Math.sin(angle)+cdy*Math.cos(-angle);if(transfo.active.type.indexOf("t")!=-1){settings.scaley=dy/(settings.height/2);}
if(transfo.active.type.indexOf("b")!=-1){settings.scaley=-dy/(settings.height/2);}
if(transfo.active.type.indexOf("l")!=-1){settings.scalex=dx/(settings.width/2);}
if(transfo.active.type.indexOf("r")!=-1){settings.scalex=-dx/(settings.width/2);}
if(settings.scaley>0&&settings.scaley<0.05)settings.scaley=0.05;if(settings.scalex>0&&settings.scalex<0.05)settings.scalex=0.05;if(settings.scaley<0&&settings.scaley>-0.05)settings.scaley=-0.05;if(settings.scalex<0&&settings.scalex>-0.05)settings.scalex=-0.05;if(event.shiftKey&&(transfo.active.type==="tl"||transfo.active.type==="bl"||transfo.active.type==="tr"||transfo.active.type==="br")){settings.scaley=settings.scalex;}}
settings.angle=Math.round(settings.angle);settings.translatex=Math.round(settings.translatex);settings.translatey=Math.round(settings.translatey);settings.scalex=Math.round(settings.scalex*100)/100;settings.scaley=Math.round(settings.scaley*100)/100;_targetCss($this,transfo);_stop_animation($this[0]);return false;}
function _setCss($this,css,settings){var transform="";var trans=false;if(settings.angle!==0){trans=true;transform+=" rotate("+settings.angle+"deg) ";}
if(settings.translatex){trans=true;transform+=" translateX("+(settings.translate==="%"?settings.translatexp+"%":settings.translatex+"px")+") ";}
if(settings.translatey){trans=true;transform+=" translateY("+(settings.translate==="%"?settings.translateyp+"%":settings.translatey+"px")+") ";}
if(settings.scalex!=1){trans=true;transform+=" scaleX("+settings.scalex+") ";}
if(settings.scaley!=1){trans=true;transform+=" scaleY("+settings.scaley+") ";}
if(trans){css+=";"
css+="-webkit-transform:"+transform+";"
+"-moz-transform:"+transform+";"
+"-ms-transform:"+transform+";"
+"-o-transform:"+transform+";"
+"transform:"+transform+";";}
css=css.replace(/(\s*;)+/g,';').replace(/^\s*;|;\s*$/g,'');$this.attr("style",css);}
function _targetCss($this,transfo){var settings=transfo.settings;var width=parseFloat(settings.css.width);var height=parseFloat(settings.css.height);settings.translatexp=Math.round(settings.translatex/width*1000)/10;settings.translateyp=Math.round(settings.translatey/height*1000)/10;_setCss($this,settings.style,settings);transfo.$markup.css({"position":"absolute","width":width+"px","height":height+"px","top":settings.pos.top+"px","left":settings.pos.left+"px"});var $controls=transfo.$markup.find('.transfo-controls');_setCss($controls,"width:"+width+"px;"+"height:"+height+"px;"+"cursor: move;",settings);$controls.children().css("transform","scaleX("+(1/settings.scalex)+") scaleY("+(1/settings.scaley)+")");_showHide($this,transfo);transfo.settings.callback.call($this[0],$this);}
function _showHide($this,transfo){transfo.$markup.css("z-index",transfo.settings.hide?-1:1000);if(transfo.settings.hide){transfo.$markup.find(".transfo-controls > *").hide();transfo.$markup.find(".transfo-scaler-mc").show();}else{transfo.$markup.find(".transfo-controls > *").show();}}
function _destroy($this){$this.data('transfo').$markup.remove();$this.removeData('transfo');}
function _reset($this){var transfo=$this.data('transfo');_destroy($this);$this.transfo(transfo.settings);}})(jQuery);;

/* /website/static/src/js/website.mobile.js defined in bundle 'website.assets_editor' */
odoo.define('website.mobile',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Dialog=require('web.Dialog');var Widget=require('web.Widget');var base=require('web_editor.base');var website=require('website.website');var _t=core._t;var MobilePreviewDialog=Dialog.extend({template:'website.mobile_preview',init:function(){this._super.apply(this,arguments);this.mobile_src=$.param.querystring(window.location.href,'mobilepreview');},start:function(){var self=this;this.$modal.addClass('oe_mobile_preview');this.$modal.on('click','.modal-header',function(){self.$el.toggleClass('o_invert_orientation');});this.$iframe=this.$('iframe');this.$iframe.on('load',function(e){self.$iframe.contents().find('body').removeClass('o_connected_user');self.$iframe.contents().find('#oe_main_menu_navbar, #o_website_add_page_modal').remove();});return this._super.apply(this,arguments);},});website.TopBar.include({start:function(){var self=this;this.$el.on('click','a[data-action=show-mobile-preview]',function(){new MobilePreviewDialog(self,{title:_t('Mobile preview')+" <span class='fa fa-refresh'/>",}).open();});return this._super();},});});;

/* /website/static/src/js/website.seo.js defined in bundle 'website.assets_editor' */
odoo.define('website.seo',function(require){'use strict';var core=require('web.core');var ajax=require('web.ajax');var Class=require('web.Class');var Dialog=require('web.Dialog');var mixins=require('web.mixins');var Model=require('web.Model');var Widget=require('web.Widget');var base=require('web_editor.base');var website=require('website.website');var _t=core._t;var qweb=core.qweb;ajax.loadXML('/website/static/src/xml/website.seo.xml',qweb);var WORD_SEPARATORS_REGEX='([\\u2000-\\u206F\\u2E00-\\u2E7F\'!"#\\$%&\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?¿¡@\\[\\]\\^_`\\{\\|\\}~\\s]+|^|$)';function analyzeKeyword(htmlPage,keyword){return htmlPage.isInTitle(keyword)?{title:'label label-primary',description:"This keyword is used in the page title",}:htmlPage.isInDescription(keyword)?{title:'label label-info',description:"This keyword is used in the page description",}:htmlPage.isInBody(keyword)?{title:'label label-info',description:"This keyword is used in the page content."}:{title:'label label-default',description:"This keyword is not used anywhere on the page."};}
var Suggestion=Widget.extend({template:'website.seo_suggestion',events:{'click .js_seo_suggestion':'select',},init:function(parent,options){this.root=options.root;this.keyword=options.keyword;this.language=options.language;this.htmlPage=options.page;this._super(parent);},start:function(){this.htmlPage.on('title-changed',this,this.renderElement);this.htmlPage.on('description-changed',this,this.renderElement);},analyze:function(){return analyzeKeyword(this.htmlPage,this.keyword);},highlight:function(){return this.analyze().title;},tooltip:function(){return this.analyze().description;},select:function(){this.trigger('selected',this.keyword);},});var SuggestionList=Widget.extend({template:'website.seo_suggestion_list',init:function(parent,options){this.root=options.root;this.language=options.language;this.htmlPage=options.page;this._super(parent);},start:function(){this.refresh();},refresh:function(){var self=this;self.$el.append(_t("Loading..."));var language=self.language||base.get_context().lang.toLowerCase();ajax.jsonRpc('/website/seo_suggest','call',{'keywords':self.root,'lang':language,}).then(function(keyword_list){self.addSuggestions(JSON.parse(keyword_list));});},addSuggestions:function(keywords){var self=this;self.$el.empty();var regex=new RegExp(self.root,"gi");var keywords=_.map(_.uniq(keywords),function(word){return word.replace(regex,"").trim();});_.each(keywords,function(keyword){if(keyword){var suggestion=new Suggestion(self,{root:self.root,language:self.language,keyword:keyword,page:self.htmlPage,});suggestion.on('selected',self,function(word,language){self.trigger('selected',word,language);});suggestion.appendTo(self.$el);}});},});var Keyword=Widget.extend({template:'website.seo_keyword',events:{'click a[data-action=remove-keyword]':'destroy',},maxWordsPerKeyword:4,init:function(parent,options){this.keyword=options.word;this.language=options.language;this.htmlPage=options.page;this._super(parent);},start:function(){this.htmlPage.on('title-changed',this,this.updateLabel);this.htmlPage.on('description-changed',this,this.updateLabel);this.suggestionList=new SuggestionList(this,{root:this.keyword,language:this.language,page:this.htmlPage,});this.suggestionList.on('selected',this,function(word,language){this.trigger('selected',word,language);});this.suggestionList.appendTo(this.$('.js_seo_keyword_suggestion'));},analyze:function(){return analyzeKeyword(this.htmlPage,this.keyword);},highlight:function(){return this.analyze().title;},tooltip:function(){return this.analyze().description;},updateLabel:function(){var cssClass="oe_seo_keyword js_seo_keyword "+this.highlight();this.$(".js_seo_keyword").attr('class',cssClass);this.$(".js_seo_keyword").attr('title',this.tooltip());},destroy:function(){this.trigger('removed');this._super();},});var KeywordList=Widget.extend({template:'website.seo_list',maxKeywords:10,init:function(parent,options){this.htmlPage=options.page;this._super(parent);},start:function(){var self=this;var existingKeywords=self.htmlPage.keywords();if(existingKeywords.length>0){_.each(existingKeywords,function(word){self.add.call(self,word);});}},keywords:function(){var result=[];this.$('.js_seo_keyword').each(function(){result.push($(this).data('keyword'));});return result;},isFull:function(){return this.keywords().length>=this.maxKeywords;},exists:function(word){return _.contains(this.keywords(),word);},add:function(candidate,language){var self=this;var word=candidate?candidate.replace(/[,;.:<>]+/g," ").replace(/ +/g," ").trim().toLowerCase():"";if(word&&!self.isFull()&&!self.exists(word)){var keyword=new Keyword(self,{word:word,language:language,page:this.htmlPage,});keyword.on('removed',self,function(){self.trigger('list-not-full');self.trigger('removed',word);});keyword.on('selected',self,function(word,language){self.trigger('selected',word,language);});keyword.appendTo(self.$el);}
if(self.isFull()){self.trigger('list-full');}},});var Image=Widget.extend({template:'website.seo_image',init:function(parent,options){this.src=options.src;this.alt=options.alt;this._super(parent);},});var ImageList=Widget.extend({init:function(parent,options){this.htmlPage=options.page;this._super(parent);},start:function(){var self=this;this.htmlPage.images().each(function(index,image){new Image(self,image).appendTo(self.$el);});},images:function(){var result=[];this.$('input').each(function(){var $input=$(this);result.push({src:$input.attr('src'),alt:$input.val(),});});return result;},add:function(image){new Image(this,image).appendTo(this.$el);},});var Preview=Widget.extend({template:'website.seo_preview',init:function(parent,options){this.title=options.title;this.url=options.url;this.description=options.description||"[ The description will be generated by google unless you specify one ]";this._super(parent);},});var HtmlPage=Class.extend(mixins.PropertiesMixin,{url:function(){var url=window.location.href;var hashIndex=url.indexOf('#');return hashIndex>=0?url.substring(0,hashIndex):url;},title:function(){var $title=$('title');return($title.length>0)&&$title.text()&&$title.text().trim();},changeTitle:function(title){$('title').text(title);this.trigger('title-changed',title);},description:function(){var $description=$('meta[name=description]');return($description.length>0)&&($description.attr('content')&&$description.attr('content').trim());},changeDescription:function(description){$('meta[name=description]').attr('content',description);this.trigger('description-changed',description);},keywords:function(){var $keywords=$('meta[name=keywords]');var parsed=($keywords.length>0)&&$keywords.attr('content')&&$keywords.attr('content').split(",");return(parsed&&parsed[0])?parsed:[];},changeKeywords:function(keywords){$('meta[name=keywords]').attr('content',keywords.join(","));this.trigger('keywords-changed',keywords);},headers:function(tag){return $('#wrap '+tag).map(function(){return $(this).text();});},images:function(){return $('#wrap img').map(function(){var $img=$(this);return{src:$img.attr('src'),alt:$img.attr('alt'),};});},company:function(){return $('html').attr('data-oe-company-name');},bodyText:function(){return $('body').children().not('.js_seo_configuration').text();},isInBody:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,"gi").test(this.bodyText());},isInTitle:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,"gi").test(this.title());},isInDescription:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,"gi").test(this.description());},});var Tip=Widget.extend({template:'website.seo_tip',events:{'closed.bs.alert':'destroy',},init:function(parent,options){this.message=options.message;this.type=options.type||'info';this._super(parent);},});var Configurator=Dialog.extend({template:'website.seo_configuration',events:{'keyup input[name=seo_page_keywords]':'confirmKeyword','blur input[name=seo_page_title]':'titleChanged','blur textarea[name=seo_page_description]':'descriptionChanged','click button[data-action=add]':'addKeyword',},canEditTitle:false,canEditDescription:false,canEditKeywords:false,canEditLanguage:false,maxTitleSize:65,maxDescriptionSize:160,init:function(parent,options){options=options||{};_.defaults(options,{title:_t('Promote This Page'),subtitle:_t('Get this page efficiently referenced in Google to attract more visitors.'),buttons:[{text:_t('Save'),classes:'btn-primary',click:this.update},{text:_t('Discard'),close:true},],});this._super(parent,options);},start:function(){var self=this;this.$modal.addClass('oe_seo_configuration js_seo_configuration');this.htmlPage=new HtmlPage();this.$('.js_seo_page_url').text(this.htmlPage.url());this.$('input[name=seo_page_title]').val(this.htmlPage.title());this.$('textarea[name=seo_page_description]').val(this.htmlPage.description());this.keywordList=new KeywordList(self,{page:this.htmlPage});this.keywordList.on('list-full',self,function(){self.$('input[name=seo_page_keywords]').attr({readonly:"readonly",placeholder:"Remove a keyword first"});self.$('button[data-action=add]').prop('disabled',true).addClass('disabled');});this.keywordList.on('list-not-full',self,function(){self.$('input[name=seo_page_keywords]').removeAttr('readonly').attr('placeholder',"");self.$('button[data-action=add]').prop('disabled',false).removeClass('disabled');});this.keywordList.on('selected',self,function(word,language){self.keywordList.add(word,language);});this.keywordList.appendTo(this.$('.js_seo_keywords_list'));this.disableUnsavableFields();this.renderPreview();this.getLanguages();},getLanguages:function(){var self=this;ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'get_languages',args:[[base.get_context().website_id]],kwargs:{context:base.get_context()}}).then(function(data){self.$('#language-box').html(core.qweb.render('Configurator.language_promote',{'language':data,'def_lang':base.get_context().lang}));});},disableUnsavableFields:function(){var self=this;this.loadMetaData().then(function(data){self.canEditTitle=data&&('website_meta_title'in data);self.canEditDescription=data&&('website_meta_description'in data);self.canEditKeywords=data&&('website_meta_keywords'in data);if(!self.canEditTitle){self.$('input[name=seo_page_title]').attr('disabled',true);}
if(!self.canEditDescription){self.$('textarea[name=seo_page_description]').attr('disabled',true);}
if(!self.canEditTitle&&!self.canEditDescription&&!self.canEditKeywords){self.$footer.find('button[data-action=update]').attr('disabled',true);}});},suggestImprovements:function(){var self=this;var tips=[];_.each(tips,function(tip){displayTip(tip.message,tip.type);});function displayTip(message,type){new Tip(self,{message:message,type:type,}).appendTo(self.$('.js_seo_tips'));}},confirmKeyword:function(e){if(e.keyCode==13){this.addKeyword();}},addKeyword:function(word){var $input=this.$('input[name=seo_page_keywords]');var $language=this.$('select[name=seo_page_language]');var keyword=_.isString(word)?word:$input.val();var language=$language.val().toLowerCase();this.keywordList.add(keyword,language);$input.val("");},update:function(){var self=this;var data={};if(this.canEditTitle){data.website_meta_title=this.htmlPage.title();}
if(this.canEditDescription){data.website_meta_description=this.htmlPage.description();}
if(this.canEditKeywords){data.website_meta_keywords=this.keywordList.keywords().join(", ");}
this.saveMetaData(data).then(function(){self.close();});},getMainObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);if(!m){return null;}else{return{model:m[1],id:m[2]|0};}},loadMetaData:function(){var obj=this.getMainObject();var def=$.Deferred();if(!obj){def.resolve(null);}else{var fields=['website_meta_title','website_meta_description','website_meta_keywords'];var model=new Model(obj.model).call('read',[[obj.id],fields,base.get_context()]).then(function(data){if(data.length){var meta=data[0];meta.model=obj.model;def.resolve(meta);}else{def.resolve(null);}}).fail(function(){def.reject();});}
return def;},saveMetaData:function(data){var obj=this.getMainObject();if(!obj){return $.Deferred().reject();}else{return new Model(obj.model).call('write',[[obj.id],data,base.get_context()]);}},titleChanged:function(){var self=this;_.defer(function(){var title=self.$('input[name=seo_page_title]').val();self.htmlPage.changeTitle(title);self.renderPreview();});},descriptionChanged:function(){var self=this;_.defer(function(){var description=self.$('textarea[name=seo_page_description]').val();self.htmlPage.changeDescription(description);self.renderPreview();});},renderPreview:function(){var preview=new Preview(this,{title:this.htmlPage.title(),description:this.htmlPage.description(),url:this.htmlPage.url(),});var $preview=this.$('.js_seo_preview');$preview.empty();preview.appendTo($preview);},destroy:function(){this.htmlPage.changeKeywords(this.keywordList.keywords());this._super.apply(this,arguments);},});website.TopBar.include({start:function(){this.$el.on('click','a[data-action=promote-current-page]',function(){new Configurator(this).open();});return this._super();}});return{Configurator:Configurator,};});;

/* /website/static/src/js/website.tour.banner.js defined in bundle 'website.assets_editor' */
odoo.define("website.tour.banner",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var base=require("web_editor.base");var _t=core._t;tour.register("banner",{url:"/",wait_for:base.ready(),},[{trigger:"a[data-action=edit]",content:_t("<b>Click Edit</b> to start designing your homepage."),position:"bottom",},{trigger:"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail",content:_t("Drag the <i>Cover</i> block and drop it in your page."),position:"bottom",run:"drag_and_drop",},{trigger:"#wrapwrap .s_text_block_image_fw h2",content:_t("<b>Click on a text</b> to start editing it. <i>It's that easy to edit your content!</i>"),position:"left",width:150,run:"text",},{trigger:".oe_overlay_options .oe_options",extra_trigger:"#wrapwrap .s_text_block_image_fw h2:not(:containsExact(\"Headline\"))",content:_t("Customize any block through this menu. Try to change the background of the banner."),position:"bottom",},{trigger:"#snippet_structure .oe_snippet:eq(3) .oe_snippet_thumbnail",content:_t("Drag another block in your page, below the cover."),position:"bottom",run:"drag_and_drop",},{trigger:"button[data-action=save]",extra_trigger:".oe_overlay_options .oe_options",content:_t("Publish your page by clicking on the <b>Save</b> button."),position:"bottom",},{trigger:"a[data-action=show-mobile-preview]",content:_t("Good Job! You created your first page. Let's check how this page looks like on <b>mobile devices</b>."),position:"bottom",},{trigger:".modal-dialog:has(#mobile-viewport) button[data-dismiss=modal]",content:_t("After having checked how it looks on mobile, <b>close the preview</b>."),position:"right",},{trigger:"#oe_main_menu_navbar a[data-action=new_page]",content:_t("<p><b>That's it.</b> Your homepage is live.</p><p>Continue adding more pages to your site or edit this page to make it even more awesome.</p>"),position:"bottom",}]);});odoo.define("website.tour.contact",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var base=require("web_editor.base");var _t=core._t;tour.register("contact",{url:"/page/contactus",wait_for:base.ready(),},[{trigger:"li#customize-menu",content:_t("<b>Install a contact form</b> to improve this page."),extra_trigger:"#o_contact_mail",position:"bottom",},{trigger:"li#install_apps",content:_t("<b>Install new apps</b> to get more features. Let's install the <i>'Contact form'</i> app."),position:"bottom",}]);});;

/* /website/static/src/js/website.ace.js defined in bundle 'website.assets_editor' */
odoo.define('website.ace',function(require){'use strict';var ajax=require('web.ajax');var Widget=require('web.Widget');var website=require('website.website');var AceCommon=require('web_editor.ace');var hash="#advanced-view-editor";var Ace=Widget.extend({events:{'click a[data-action=ace]':'launchAce',},launchAce:function(e){var self=this;if(!window.ace&&!this.loadJS_def){this.loadJS_def=ajax.loadJS('/web/static/lib/ace/ace.odoo-custom.js').then(function(){return $.when(ajax.loadJS('/web/static/lib/ace/mode-xml.js'),ajax.loadJS('/web/static/lib/ace/theme-monokai.js'));});}
if(e){e.preventDefault();}
return $.when(this.loadJS_def).then(function(){if(self.globalEditor){self.globalEditor.open();}else{self.globalEditor=new ViewEditor(self);self.globalEditor.appendTo($(document.body));}});},});var ViewEditor=AceCommon.ViewEditor.extend({loadTemplates:function(){var self=this;var args={key:$(document.documentElement).data('view-xmlid'),full:true,bundles:this.$('.js_include_bundles')[0].checked};return ajax.jsonRpc('/website/customize_template_get','call',args).then(function(views){self.loadViews.call(self,views);self.open.call(self);var curentHash=window.location.hash;var indexOfView=curentHash.indexOf("?view=");if(indexOfView>=0){var viewId=parseInt(curentHash.substring(indexOfView+6,curentHash.length),10);self.$('#ace-view-list').val(viewId).change();}else{if(views.length>=2){var mainTemplate=views[0];self.$('#ace-view-list').val(mainTemplate.id).trigger('change');}
window.location.hash=hash;}});},displayError:function(){var error=this._super.apply(this,arguments);website.error(error.title,error.message);},updateHash:function(){window.location.hash=hash+"?view="+this.selectedViewId();},reloadPage:function(){this.updateHash();window.location.reload();},close:function(){window.location.hash="";this.$el.removeClass('oe_ace_open').addClass('oe_ace_closed');},});website.TopBar.include({start:function(){this.ace=new Ace();return $.when(this._super.apply(this,arguments),this.ace.attachTo($('#html_editor')));},});});;

/* /website/static/src/js/website.translator.js defined in bundle 'website.assets_editor' */
odoo.define('website.translator',function(require){'use strict';var core=require('web.core');var ajax=require('web.ajax');var Widget=require('web.Widget');var base=require('web_editor.base');var translate=require('web_editor.translate');var website=require('website.website');var local_storage=require('web.local_storage');var utils=require('web.utils');var qweb=core.qweb;if(!translate.translatable){return;}
website.TopBar.include({events:_.extend({},website.TopBar.prototype.events,{'click [data-action="edit_master"]':'edit_master','click [data-action="translate"]':'translate',}),translate:function(ev){ev.preventDefault();if(translate.edit_translations){translate.instance.edit();}else{location.search+='&edit_translations';}},edit_master:function(ev){ev.preventDefault();var lang='/'+utils.get_cookie('website_lang');var current=document.createElement('a');current.href=window.location.toString();current.search+=(current.search?'&':'?')+'enable_editor=1';if(current.pathname.indexOf(lang)===0){current.pathname=current.pathname.replace(lang,'');}
var link=document.createElement('a');link.href='/website/lang/default';link.search+=(link.search?'&':'?')+'r='+encodeURIComponent(current.pathname+current.search+current.hash);window.location=link.href;},});if(!translate.edit_translations){return;}
ajax.loadXML('/website/static/src/xml/website.translator.xml',qweb);var nodialog='website_translator_nodialog';var Translate=translate.Class.include({onTranslateReady:function(){if(this.gengo_translate){this.translation_gengo_display();}
this._super();},edit:function(){$("#oe_main_menu_navbar").hide();if(!local_storage.getItem(nodialog)){var dialog=new TranslatorDialog();dialog.appendTo($(document.body));dialog.on('activate',this,function(){if(dialog.$('input[name=do_not_show]').prop('checked')){local_storage.setItem(nodialog,true);}else{local_storage.removeItem(nodialog);}
dialog.$el.modal('hide');});}
return this._super();},cancel:function(){$("#oe_main_menu_navbar").show();return this._super();}});var TranslatorDialog=Widget.extend({events:_.extend({},website.TopBar.prototype.events,{'hidden.bs.modal':'destroy','click button[data-action=activate]':function(ev){this.trigger('activate');},}),template:'website.TranslatorDialog',start:function(){this.$el.modal();},});});;

/* /website/static/src/js/website.theme.js defined in bundle 'website.assets_editor' */
odoo.define('website.theme',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var session=require('web.session');var Widget=require('web.Widget');var base=require('web_editor.base');var website=require('website.website');var QWeb=core.qweb;ajax.jsonRpc('/web/dataset/call','call',{'model':'ir.ui.view','method':'read_template','args':['website.theme_customize',base.get_context()]}).done(function(data){QWeb.add_template(data);});ajax.jsonRpc('/web/dataset/call','call',{'model':'ir.ui.view','method':'read_template','args':['web_editor.colorpicker',base.get_context()]}).done(function(data){QWeb.add_template(data);});var Theme=Widget.extend({template:'website.theme_customize',events:{'change input[data-xmlid],input[data-enable],input[data-disable]':'change_selection','mousedown label:has(input[data-xmlid],input[data-enable],input[data-disable])':function(event){var self=this;this.time_select=_.defer(function(){var input=$(event.target).find('input').length?$(event.target).find('input'):$(event.target).parent().find('input');self.on_select(input,event);});},'click .close':'close','click':'click',},start:function(){var self=this;this.timer=null;this.reload=false;this.flag=false;this.active_select_tags();this.$inputs=this.$("input[data-xmlid],input[data-enable],input[data-disable]");setTimeout(function(){self.$el.addClass('in');},0);this.keydown_escape=function(event){if(event.keyCode===27){self.close();}};$(document).on('keydown',this.keydown_escape);return this.load_xml_data().then(function(){self.flag=true;});},active_select_tags:function(){var uniqueID=0;var self=this;var $selects=this.$('select:has(option[data-xmlid],option[data-enable],option[data-disable])');$selects.each(function(){uniqueID++;var $select=$(this);var $options=$select.find('option[data-xmlid], option[data-enable], option[data-disable]');$options.each(function(){var $option=$(this);var $input=$('<input style="display: none;" type="radio" name="theme_customize_modal-select-'+uniqueID+'"/>');$input.attr('id',$option.attr('id'));$input.attr('data-xmlid',$option.data('xmlid'));$input.attr('data-enable',$option.data('enable'));$input.attr('data-disable',$option.data('disable'));$option.removeAttr('id');$option.data('input',$input);$input.on('update',function(){$option.attr('selected',$(this).prop("checked"));});self.$el.append($input);});$select.data("value",$options.first());$options.first().attr("selected",true);});$selects.change(function(){var $option=$(this).find('option:selected');$(this).data("value").data("input").prop("checked",true).change();$(this).data("value",$option);$option.data("input").change();});},load_xml_data:function(){var self=this;$('#theme_error').remove();return ajax.jsonRpc('/website/theme_customize_get','call',{'xml_ids':this.get_xml_ids(this.$inputs)}).done(function(data){self.$inputs.filter('[data-xmlid=""]').prop("checked",true).change();self.$inputs.filter('[data-xmlid]:not([data-xmlid=""])').each(function(){if(!_.difference(self.get_xml_ids($(this)),data[1]).length){$(this).prop("checked",false).trigger("change",true);}
if(!_.difference(self.get_xml_ids($(this)),data[0]).length){$(this).prop("checked",true).trigger("change",true);}});}).fail(function(d,error){$('body').prepend($('<div id="theme_error"/>').text(error.data.message));});},get_inputs:function(string){return this.$inputs.filter('#'+string.split(/\s*,\s*/).join(", #"));},get_xml_ids:function($inputs){var xml_ids=[];$inputs.each(function(){if($(this).data('xmlid')&&$(this).data('xmlid').length){xml_ids=xml_ids.concat($(this).data('xmlid').split(/\s*,\s*/));}});return xml_ids;},update_style:function(enable,disable,reload){if(this.$el.hasClass("loading")){return;}
this.$el.addClass('loading');if(!reload&&session.debug!=="assets"){var self=this;return ajax.jsonRpc('/website/theme_customize','call',{enable:enable,disable:disable,get_bundle:true,}).then(function(bundleHTML){var $links=$('link[href*=".assets_frontend"]');var $newLinks=$(bundleHTML).filter('link');var linksLoaded=$.Deferred();var nbLoaded=0;$newLinks.on('load',function(e){if(++nbLoaded>=$newLinks.length){linksLoaded.resolve();}});$newLinks.on('error',function(e){linksLoaded.reject();window.location.hash="theme=true";window.location.reload();});$links.last().after($newLinks);return linksLoaded.then(function(){$links.remove();self.$el.removeClass('loading');});});}else{var href='/website/theme_customize_reload'+'?href='+encodeURIComponent(window.location.href)+'&enable='+encodeURIComponent(enable.join(","))+'&disable='+encodeURIComponent(disable.join(","));window.location.href=href;return $.Deferred();}},enable_disable:function($inputs,enable){$inputs.each(function(){var check=$(this).prop("checked");var $label=$(this).closest("label");$(this).prop("checked",enable);if(enable)$label.addClass("checked");else $label.removeClass("checked");if(check!=enable){$(this).change();}});},change_selection:function(event,init_mode){var self=this;clearTimeout(this.time_select);if(this.$el.hasClass("loading"))return;var $option=$(event.target).is('input')?$(event.target):$("input",event.target),$options=$option,checked=$option.prop("checked");if(checked){if($option.data('enable')){var $inputs=this.get_inputs($option.data('enable'));$options=$options.add($inputs.filter(':not(:checked)'));this.enable_disable($inputs,true);}
if($option.data('disable')){var $inputs=this.get_inputs($option.data('disable'));$options=$options.add($inputs.filter(':checked'));this.enable_disable($inputs,false);}
$option.closest("label").addClass("checked");}else{$option.closest("label").removeClass("checked");}
var $enable=this.$inputs.filter('[data-xmlid]:checked');$enable.closest("label").addClass("checked");var $disable=this.$inputs.filter('[data-xmlid]:not(:checked)');$disable.closest("label").removeClass("checked");var $sets=this.$inputs.filter('input[data-enable]:not([data-xmlid]), input[data-disable]:not([data-xmlid])');$sets.each(function(){var $set=$(this);var checked=true;if($set.data("enable")){self.get_inputs($(this).data("enable")).each(function(){if(!$(this).prop("checked"))checked=false;});}
if($set.data("disable")){self.get_inputs($(this).data("disable")).each(function(){if($(this).prop("checked"))checked=false;});}
if(checked){$set.prop("checked",true).closest("label").addClass("checked");}else{$set.prop("checked",false).closest("label").removeClass("checked");}
$set.trigger('update');});if(this.flag&&$option.data('reload')&&document.location.href.match(new RegExp($option.data('reload')))){this.reload=true;}
clearTimeout(this.timer);if(this.flag){this.timer=_.defer(function(){if(!init_mode)self.on_select($options,event);self.update_style(self.get_xml_ids($enable),self.get_xml_ids($disable),self.reload);self.reload=false;});}else{this.timer=_.defer(function(){if(!init_mode)self.on_select($options,event);self.reload=false;});}},on_select:function($inputs,event){clearTimeout(this.time_select);},click:function(event){if(!$(event.target).closest("#theme_customize_modal > *").length){this.close();}},close:function(){var self=this;$(document).off('keydown',this.keydown_escape);$('#theme_error').remove();$('link[href*=".assets_"]').removeAttr('data-loading');this.$el.removeClass('in');this.$el.addClass('out');setTimeout(function(){self.destroy();},500);}});function themeError(message){var _t=core._t;if(message.indexOf('lessc')){message='<span class="text-muted">'+message+"</span><br/><br/>"+_t("Please install or update node-less");}
website.error(_t("Theme Error"),message);}
function theme_customize(){if(Theme.open&&!Theme.open.isDestroyed())return;Theme.open=new Theme();Theme.open.appendTo("body");var error=window.getComputedStyle(document.body,':before').getPropertyValue('content');if(error&&error!=='none'){themeError(eval(error));}}
website.TopBar.include({start:function(){var self=this;base.ready().then(function(){self.$el.on('click',"#theme_customize a",theme_customize);if((window.location.hash||"").indexOf("theme=true")!==-1){theme_customize();window.location.hash="";}});return this._super();}});return Theme;});;

/* /website/static/src/js/web_planner_website.js defined in bundle 'website.assets_editor' */
odoo.define('web.planner.website',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Model=require('web.Model');var Widget=require('web.Widget');var planner=require('web.planner.common');require('web_editor.base');var qweb=core.qweb;if(!$('#oe_main_menu_navbar').length){return $.Deferred().reject("DOM doesn't contain #oe_main_menu_navbar");}
var WebsitePlannerLauncher=Widget.extend({template:"PlannerLauncher",start:function(){var self=this;var res=this._super.apply(this,arguments);this.$('.progress').show();return res.then(this.get_website_planner.bind(this)).then(function(planner){self.$el.on('click',self,self.show_dialog.bind(self));if(planner.length){self.planner=planner[0];self.planner.data=$.parseJSON(planner[0].data)||{};self.setup();}});},get_website_planner:function(){return(new Model('web.planner')).call('search_read',[[['planner_application','=','planner_website']]]);},setup:function(){var self=this;this.dialog=new planner.PlannerDialog(this,this.planner);this.dialog.appendTo($('<div>'));this.$(".progress").tooltip({html:true,title:this.planner.tooltip_planner,placement:'bottom',container:'body',delay:{'show':700}});this.dialog.on("planner_progress_changed",this,function(percent){self.update_parent_progress_bar(percent);});},update_parent_progress_bar:function(percent){this.$(".progress-bar").css('width',percent+"%");},show_dialog:function(){this.dialog.$el.appendTo(document.body);this.dialog.$el.modal('show');},});return ajax.loadXML('/web_planner/static/src/xml/web_planner.xml',qweb).then(function(){var websitePlannerLauncher=new WebsitePlannerLauncher();websitePlannerLauncher.prependTo($('#oe_main_menu_navbar .o_menu_systray'));});});;

/* /website/static/src/js/website.contentMenu.js defined in bundle 'website.assets_editor' */
odoo.define('website.contentMenu',function(require){"use strict";var core=require('web.core');var ajax=require('web.ajax');var Widget=require('web.Widget');var base=require('web_editor.base');var editor=require('web_editor.editor');var widget=require('web_editor.widget');var website=require('website.website');var _t=core._t;var qweb=core.qweb;ajax.loadXML('/website/static/src/xml/website.contentMenu.xml',qweb);var TopBarContent=Widget.extend({start:function(){var self=this;this.$el.add($('#o_website_add_page_modal')).on('click','a[data-action]',function(e){e.preventDefault();self[$(this).data('action')]();});return this._super();},edit_menu:function(action_before_reload){var context=base.get_context();var def=$.Deferred();if($("[data-content_menu_id]").length){var select=new SelectEditMenuDialog();select.on('save',this,function(root){def.resolve(root);});select.open();}else{def.resolve(null);}
return def.then(function(root_id){return ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website.menu',method:'get_tree',args:[context.website_id,root_id],kwargs:{context:context},}).then(function(menu){var dialog=new EditMenuDialog(this,{},menu).open();dialog.on("save",null,function(){$.when(action_before_reload&&action_before_reload()).then(function(){editor.reload();});});return dialog;});});},new_page:function(){website.prompt({id:"editor_new_page",window_title:_t("New Page"),input:_t("Page Title"),init:function(){var $group=this.$dialog.find("div.form-group");$group.removeClass("mb0");var $add=$('<div/>',{'class':'form-group mb0'}).append($('<span/>',{'class':'col-sm-offset-3 col-sm-9 text-left'}).append(qweb.render('web_editor.components.switch',{id:'switch_addTo_menu',label:_t("Add page in menu")})));$add.find('input').prop('checked',true);$group.after($add);}}).then(function(val,field,$dialog){if(val){var url='/website/add/'+encodeURIComponent(val);if($dialog.find('input[type="checkbox"]').is(':checked'))url+="?add_menu=1";document.location=url;}});},rename_page:function(){var self=this;var context=base.get_context();self.mo_id=self.getMainObject().id;ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'page_search_dependencies',args:[self.mo_id],kwargs:{context:context},}).then(function(deps){website.prompt({id:"editor_rename_page",window_title:_t("Rename This Page"),dependencies:deps,},'website.rename_page').then(function(val,field,$dialog){ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'rename_page',args:[self.mo_id,val,],kwargs:{context:context},}).then(function(new_name){window.location="/page/"+encodeURIComponent(new_name);});});});},delete_page:function(){var self=this;var context=base.get_context();self.mo_id=self.getMainObject().id;ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'page_search_dependencies',args:[self.mo_id],kwargs:{context:context,},}).then(function(deps){website.prompt({id:"editor_delete_page",window_title:_t("Delete Page"),dependencies:deps,init:function(){$('.btn-continue').prop("disabled",true);},},'website.delete_page').then(function(val,field,$dialog){if($dialog.find('input[type="checkbox"]').is(':checked')){ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'delete_page',args:[self.mo_id],kwargs:{context:context},}).then(function(){window.location="/";});}});});},getMainObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);if(!m){return null;}else{return{model:m[1],id:m[2]|0};}}});website.TopBar.include({start:function(){this.content_menu=new TopBarContent();var def=this.content_menu.attachTo($('.oe_content_menu'));return $.when(this._super(),def);}});var SelectEditMenuDialog=widget.Dialog.extend({template:'website.contentMenu.dialog.select',init:function(parent,options){var self=this;self.roots=[{id:null,name:_t("Top Menu")}];$("[data-content_menu_id]").each(function(){self.roots.push({id:$(this).data("content_menu_id"),name:$(this).attr("name")});});this._super(parent,_.extend({},{title:_t("Select a Menu"),save_text:_t("Continue")},options||{}));},save:function(){this.final_data=parseInt(this.$el.find("select").val()||null);this._super.apply(this,arguments);}});var EditMenuDialog=widget.Dialog.extend({template:'website.contentMenu.dialog.edit',events:_.extend({},widget.Dialog.prototype.events,{'click a.js_add_menu':'add_menu','click button.js_edit_menu':'edit_menu','click button.js_delete_menu':'delete_menu',}),init:function(parent,options,menu){this.menu=menu;this.root_menu_id=menu.id;this.flat=this.flatenize(menu);this.to_delete=[];this._super(parent,_.extend({},{title:_t("Edit Menu")},options||{}));},start:function(){var r=this._super.apply(this,arguments);this.$('.oe_menu_editor').nestedSortable({listType:'ul',handle:'div',items:'li',maxLevels:2,toleranceElement:'> div',forcePlaceholderSize:true,opacity:0.6,placeholder:'oe_menu_placeholder',tolerance:'pointer',attribute:'data-menu-id',expression:'()(.+)',});return r;},flatenize:function(node,dict){dict=dict||{};var self=this;dict[node.id]=node;node.children.forEach(function(child){self.flatenize(child,dict);});return dict;},add_menu:function(){var self=this;var dialog=new MenuEntryDialog(this,{},undefined,{});dialog.on('save',this,function(link){var new_menu={id:_.uniqueId('new-'),name:link.text,url:link.url,new_window:link.isNewWindow,parent_id:false,sequence:0,children:[],};self.flat[new_menu.id]=new_menu;self.$('.oe_menu_editor').append(qweb.render('website.contentMenu.dialog.submenu',{submenu:new_menu}));});dialog.open();},edit_menu:function(ev){var self=this;var menu_id=$(ev.currentTarget).closest('[data-menu-id]').data('menu-id');var menu=self.flat[menu_id];if(menu){var dialog=new MenuEntryDialog(this,{},undefined,menu);dialog.on('save',this,function(link){var id=link.id;var menu_obj=self.flat[id];_.extend(menu_obj,{'name':link.text,'url':link.url,'new_window':link.isNewWindow,});var $menu=self.$('[data-menu-id="'+id+'"]');$menu.find('.js_menu_label').first().text(menu_obj.name);});dialog.open();}else{alert("Could not find menu entry");}},delete_menu:function(ev){var $menu=$(ev.currentTarget).closest('[data-menu-id]');var mid=$menu.data('menu-id')|0;if(mid){this.to_delete.push(mid);}
$menu.remove();},save:function(){var _super=this._super.bind(this);var self=this;var new_menu=this.$('.oe_menu_editor').nestedSortable('toArray',{startDepthCount:0});var levels=[];var data=[];var context=base.get_context();new_menu.forEach(function(menu){if(menu.id){levels[menu.depth]=(levels[menu.depth]||0)+1;var mobj=self.flat[menu.id];mobj.sequence=levels[menu.depth];mobj.parent_id=(menu.parent_id|0)||menu.parent_id||self.root_menu_id;delete(mobj.children);data.push(mobj);}});ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website.menu',method:'save',args:[[context.website_id],{data:data,to_delete:self.to_delete}],kwargs:{context:context},}).then(function(){return _super();});},});var MenuEntryDialog=widget.LinkDialog.extend({init:function(parent,options,editor,data){data.text=data.name||'';data.isNewWindow=data.new_window;this.data=data;return this._super.apply(this,arguments);},start:function(){var self=this;this.$(".link-style").remove();this.$("label[for=link-new]").text("Menu Label");return $.when(this._super.apply(this,arguments)).then(function(){var $link_text=self.$('#link-text').focus();self.$('#link-page').change(function(e){if($link_text.val()){return;}
var data=$(this).select2('data');$link_text.val(data.create?data.id:data.text);$link_text.focus();});});},save:function(){var $e=this.$('#link-text');if(!$e.val()||!$e[0].checkValidity()){$e.closest('.form-group').addClass('has-error');$e.focus();return;}
return this._super.apply(this,arguments);}});return{'TopBar':TopBarContent,'EditMenuDialog':EditMenuDialog,};});;

/* /website/static/src/js/website.snippets.editor.js defined in bundle 'website.assets_editor' */
odoo.define('website.snippets.editor',function(require){'use strict';var ajax=require("web.ajax");var core=require("web.core");var Dialog=require("web.Dialog");var Model=require("web.Model");var editor=require("web_editor.editor");var animation=require('web_editor.snippets.animation');var options=require('web_editor.snippets.options');var snippet_editor=require('web_editor.snippet.editor');var website=require('website.website');var _t=core._t;snippet_editor.Class.include({_get_snippet_url:function(){return'/website/snippets';}});options.registry.menu_data=options.Class.extend({start:function(){this._super.apply(this,arguments);this.link=this.$target.attr("href");},on_focus:function(){this._super.apply(this,arguments);(new Dialog(null,{title:_t("Confirmation"),$content:$(core.qweb.render("website.leaving_current_page_edition")),buttons:[{text:_t("Go to Link"),classes:"btn-primary",click:save_editor_then_go_to.bind(null,this.link)},{text:_t("Edit the menu"),classes:"btn-primary",click:function(){var self=this;website.topBar.content_menu.edit_menu(function(){return editor.editor_bar.save_without_reload();}).then(function(dialog){self.close();});}},{text:_t("Stay on this page"),close:true}]})).open();function save_editor_then_go_to(url){editor.editor_bar.save_without_reload().then(function(){window.location.href=url;});}},});options.registry.company_data=options.Class.extend({start:function(){this._super.apply(this,arguments);var proto=options.registry.company_data.prototype;if(proto.__link_deferred===undefined){proto.__link_deferred=$.Deferred();return ajax.jsonRpc("/web/session/get_session_info","call").then(function(session){return(new Model("res.users")).get_func("read")(session.uid,["company_id"]).then(function(res){proto.__link_deferred.resolve("/web#action=base.action_res_company_form&view_type=form&id="+(res&&res[0]&&res[0].company_id[0]||1));});});}},on_focus:function(){this._super.apply(this,arguments);var proto=options.registry.company_data.prototype;Dialog.confirm(null,_t("Do you want to edit the company data ?"),{confirm_callback:function(){editor.editor_bar.save_without_reload().then(function(){proto.__link_deferred.then(function(link){window.location.href=link;});});},});},});options.registry.slider=options.Class.extend({drop_and_build_snippet:function(){this.id="myCarousel"+new Date().getTime();this.$target.attr("id",this.id);this.$target.find("[data-slide]").attr("data-cke-saved-href","#"+this.id);this.$target.find("[data-target]").attr("data-target","#"+this.id);this.rebind_event();},on_clone:function($clone){var id="myCarousel"+new Date().getTime();$clone.attr("id",id);$clone.find("[data-slide]").attr("href","#"+id);$clone.find("[data-slide-to]").attr("data-target","#"+id);},rebind_event:function(){var self=this;this.$target.find('.carousel-indicators [data-slide-to]').off('click').on('click',function(){self.$target.carousel(+$(this).data('slide-to'));});},clean_for_save:function(){this._super();this.$target.find(".item").removeClass("next prev left right active").first().addClass("active");this.$target.find('.carousel-indicators').find('li').removeClass('active').first().addClass("active");},start:function(){this._super.apply(this,arguments);this.$target.carousel({interval:false});this.id=this.$target.attr("id");this.$inner=this.$target.find('.carousel-inner');this.$indicators=this.$target.find('.carousel-indicators');this.$target.carousel('pause');this.rebind_event();},add_slide:function(type){if(type!=="click")return;var self=this;var cycle=this.$inner.find('.item').length;var $active=this.$inner.find('.item.active, .item.prev, .item.next').first();var index=$active.index();this.$target.find('.carousel-control, .carousel-indicators').removeClass("hidden");this.$indicators.append('<li data-target="#'+this.id+'" data-slide-to="'+cycle+'"></li>');var $snippets=this.buildingBlock.$snippets;var selection=this.$target.closest('[class*="s_"');if(_.isUndefined(selection)){var point=0;var className=_.compact(this.$target.attr("class").split(" "));$snippets.find('.oe_snippet_body').each(function(){var len=_.intersection(_.compact(this.className.split(" ")),className).length;if(len>point){point=len;selection=this;}});}
else{var s_class=selection.attr('class').split(' ').filter(function(o){return _.str.startsWith(o,"s_");})[0];selection=$snippets.find("."+s_class);}
var $clone=$(selection).find('.item:first').clone();$clone.removeClass('active').insertAfter($active);setTimeout(function(){self.$target.carousel().carousel(++index);self.rebind_event();},0);return $clone;},remove_slide:function(type){if(type!=="click"||this.remove_process)return;var self=this;var $items=this.$inner.find('.item');var cycle=$items.length-1;var $active=$items.filter('.active');var index=$active.index();if(cycle>0){this.remove_process=true;this.$target.on('slid.bs.carousel.slide_removal',function(event){$active.remove();self.$indicators.find("li:last").remove();self.$target.off('slid.bs.carousel.slide_removal');self.rebind_event();self.remove_process=false;if(cycle===1){self.$target.find('.carousel-control, .carousel-indicators').addClass("hidden");}});_.defer(function(){self.$target.carousel(index>0?--index:cycle);});}},interval:function(type,value){this.$target.attr("data-interval",value);},set_active:function(){this.$el.find('li[data-interval]').removeClass("active").filter('li[data-interval='+this.$target.attr("data-interval")+']').addClass("active");},});options.registry.carousel=options.registry.slider.extend({getSize:function(){this.grid=this._super();this.grid.size=8;return this.grid;},clean_for_save:function(){this._super();this.$target.removeClass('oe_img_bg '+this._class).css("background-image","");},load_style_options:function(){this._super();$(".snippet-option-size li[data-value='']").remove();},start:function(){var self=this;this._super.apply(this,arguments);this.$target.on('slid.bs.carousel',function(){self.$target.carousel("pause");if(!self.editor)return;_.each(["background","background_position","colorpicker"],function(opt_name){var s_option=self.editor.styles[opt_name];if(!s_option)return;s_option.$target=self.$target.find(".item.active");s_option.set_active();s_option.$target.trigger("snippet-option-change",[s_option]);if(opt_name==='background'){s_option.bind_bg_events();}});});this.$target.trigger('slid.bs.carousel');},rebind_event:function(){var self=this;this.$target.find('.carousel-control').off('click').on('click',function(){self.$target.carousel($(this).data('slide'));});this._super.apply(this,arguments);this.$target.find('.item.text_image, .item.image_text, .item.text_only').find('.container > .carousel-caption > div, .container > img.carousel-image').attr('contentEditable','true');},});options.registry["margin-x"]=options.registry.marginAndResize.extend({preventChildPropagation:true,getSize:function(){this.grid=this._super();var width=this.$target.parents(".row:first").first().outerWidth();var grid=[1,2,3,4,5,6,7,8,9,10,11,12];this.grid.e=[_.map(grid,function(v){return'col-md-'+v;}),_.map(grid,function(v){return width/12*v;})];grid=[-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11];this.grid.w=[_.map(grid,function(v){return'col-md-offset-'+v;}),_.map(grid,function(v){return width/12*v;}),12];return this.grid;},on_clone:function($clone,options){if(options.isCurrent){var _class=$clone.attr("class").replace(/\s*(col-lg-offset-|col-md-offset-)([0-9-]+)/g,'');$clone.attr("class",_class);}
return false;},on_resize:function(compass,beginClass,current){if(compass==='w'){var beginCol=Number(beginClass.match(/col-md-([0-9]+)|$/)[1]||0);var beginOffset=Number(beginClass.match(/col-md-offset-([0-9-]+)|$/)[1]||beginClass.match(/col-lg-offset-([0-9-]+)|$/)[1]||0);var offset=Number(this.grid.w[0][current].match(/col-md-offset-([0-9-]+)|$/)[1]||0);if(offset<0){offset=0;}
var colSize=beginCol-(offset-beginOffset);if(colSize<=0){colSize=1;offset=beginOffset+beginCol-1;}
this.$target.attr("class",this.$target.attr("class").replace(/\s*(col-lg-offset-|col-md-offset-|col-md-)([0-9-]+)/g,''));this.$target.addClass('col-md-'+(colSize>12?12:colSize));if(offset>0){this.$target.addClass('col-md-offset-'+offset);}}
this._super(compass,beginClass,current);},});options.registry.parallax=options.Class.extend({getSize:function(){this.grid=this._super.apply(this,arguments);this.grid.size=8;return this.grid;},on_resize:function(){this._refresh();},_refresh:function(){this.$target.data("snippet-view").set_values();},start:function(){this._super.apply(this,arguments);if(!this.$target.data("snippet-view")){this.$target.data("snippet-view",new animation.registry.parallax(this.$target));}
this.scroll();this._refresh_callback=this._refresh.bind(this);this.buildingBlock.$el.on("snippet-dropped snippet-activated",this._refresh_callback);this.$target.on('snippet-option-change snippet-option-preview',this._refresh_callback);},scroll:function(type,value){this.$target.attr("data-scroll-background-ratio",value);this._refresh();},set_active:function(){this.$el.find('[data-scroll]').removeClass("active").filter('[data-scroll="'+(this.$target.attr('data-scroll-background-ratio')||0)+'"]').addClass("active");},clean_for_save:function(){this._super.apply(this,arguments);this.$target.css("background-position",'').css("background-attachment",'');},on_move:function(){this._super.apply(this,arguments);this._refresh();},on_remove:function(){this._super.apply(this,arguments);this.$target.off("snippet-option-change snippet-option-preview",this._refresh_callback);this.buildingBlock.$el.off("snippet-dropped snippet-activated",this._refresh_callback);},});options.registry.ul=options.Class.extend({start:function(){var self=this;this._super();this.$target.data("snippet-view",new animation.registry.ul(this.$target,true));this.$target.on('mouseup','.o_ul_toggle_self, .o_ul_toggle_next',function(){setTimeout(function(){self.buildingBlock.cover_target(self.$overlay,self.$target);},0);});},reset_ul:function(){this.$target.find('.o_ul_toggle_self, .o_ul_toggle_next').remove();this.$target.find('li:has(>ul,>ol)').map(function(){var texts=_.filter(_.toArray(this.childNodes),function(a){return a.nodeType==3;});if(!texts.length||!texts.reduce(function(a,b){return a.textContent+b.textContent;}).match(/\S/)){return;}
$(this).children('ul,ol').addClass('o_close');return $(this).children(':not(ul,ol)')[0]||this;}).prepend('<a href="#" class="o_ul_toggle_self fa" />');var $li=this.$target.find('li:has(+li:not(>.o_ul_toggle_self)>ul, +li:not(>.o_ul_toggle_self)>ol)');$li.map(function(){return $(this).children()[0]||this;}).prepend('<a href="#" class="o_ul_toggle_next fa" />');$li.removeClass('o_open').next().addClass('o_close');this.$target.find("li").removeClass('o_open').css('list-style','');this.$target.find("li:has(.o_ul_toggle_self, .o_ul_toggle_next), li:has(>ul,>ol):not(:has(>li))").css('list-style','none');},clean_for_save:function(){this._super();if(!this.$target.hasClass('o_ul_folded')){this.$target.find(".o_close").removeClass("o_close");}
this.$target.find("li:not(:has(>ul))").css('list-style','');},toggle_class:function(type,value,$li){this._super(type,value,$li);this.$target.data("snippet-view").stop();this.reset_ul();this.$target.find("li:not(:has(>ul))").css('list-style','');this.$target.data("snippet-view",new animation.registry.ul(this.$target,true));}});options.registry.collapse=options.Class.extend({start:function(){var self=this;this._super();this.$target.on('shown.bs.collapse hidden.bs.collapse','[role="tabpanel"]',function(){self.buildingBlock.cover_target(self.$overlay,self.$target);});},create_ids:function($target){var time=new Date().getTime();var $tab=$target.find('[data-toggle="collapse"]');var $tablist=$target.closest('.panel-group');var tablist_id=$tablist.attr("id");if(!tablist_id){tablist_id="myCollapse"+time;$tablist.attr("id",tablist_id);}
$tab.attr('data-parent',"#"+tablist_id);$tab.data('parent',"#"+tablist_id);var $panel=$target.find('.panel-collapse');var panel_id=$panel.attr("id");if(!panel_id){while($('#'+(panel_id="myCollapseTab"+time)).length){time++;}
$panel.attr("id",panel_id);}
$tab.attr('data-target',"#"+panel_id);$tab.data('target',"#"+panel_id);},drop_and_build_snippet:function(){this._super();this.create_ids(this.$target);},on_clone:function($clone){this._super.apply(this,arguments);$clone.find('[data-toggle="collapse"]').removeAttr('data-target').removeData('target');$clone.find('.panel-collapse').removeAttr('id');this.create_ids($clone);},on_move:function(){this._super();this.create_ids(this.$target);var $panel=this.$target.find('.panel-collapse').removeData('bs.collapse');if($panel.attr('aria-expanded')==='true'){$panel.closest('.panel-group').find('.panel-collapse[aria-expanded="true"]').filter(function(){return this!==$panel[0];}).collapse('hide').one('hidden.bs.collapse',function(){$panel.trigger('shown.bs.collapse');});}}});return options;});odoo.define('website.rte.summernote',function(require){'use strict';var core=require('web.core');require('web_editor.rte.summernote');var eventHandler=$.summernote.eventHandler;var renderer=$.summernote.renderer;var tplIconButton=renderer.getTemplate().iconButton;var _t=core._t;var fn_tplPopovers=renderer.tplPopovers;renderer.tplPopovers=function(lang,options){var $popover=$(fn_tplPopovers.call(this,lang,options));$popover.find('.note-image-popover .btn-group:has([data-value="img-thumbnail"])').append(tplIconButton('fa fa-object-ungroup',{title:_t('Transform the picture (click twice to reset transformation)'),event:'transform',}));return $popover;};$.summernote.pluginEvents.transform=function(event,editor,layoutInfo,sorted){var $selection=layoutInfo.handle().find('.note-control-selection');var $image=$($selection.data('target'));if($image.data('transfo-destroy')){$image.removeData('transfo-destroy');return;}
$image.transfo();var mouseup=function(event){$('.note-popover button[data-event="transform"]').toggleClass('active',$image.is('[style*="transform"]'));};$(document).on('mouseup',mouseup);var mousedown=function(event){if(!$(event.target).closest('.transfo-container').length){$image.transfo("destroy");$(document).off('mousedown',mousedown).off('mouseup',mouseup);}
if($(event.target).closest('.note-popover').length){$image.data('transfo-destroy',true).attr("style",($image.attr("style")||'').replace(/[^;]*transform[\w:]*;?/g,''));}
$image.trigger('content_changed');};$(document).on('mousedown',mousedown);};var fn_boutton_update=eventHandler.modules.popover.button.update;eventHandler.modules.popover.button.update=function($container,oStyle){fn_boutton_update.call(this,$container,oStyle);$container.find('button[data-event="transform"]').toggleClass('active',$(oStyle.image).is('[style*="transform"]')).toggleClass('hidden',!$(oStyle.image).is('img'));};});;

/* /website/static/src/js/website.snippets.gallery.js defined in bundle 'website.assets_editor' */
odoo.define('website.snippets.editor.gallery',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var base=require('web_editor.base');var widget=require('web_editor.widget');var animation=require('web_editor.snippets.animation');var options=require('web_editor.snippets.options');var snippet_editor=require('web_editor.snippet.editor');var _t=core._t;var qweb=core.qweb;ajax.loadXML('/website/static/src/xml/website.gallery.xml',qweb);options.registry.gallery=options.Class.extend({start:function(){this._super();this.bind_change();var index=Math.max(_.map(this.$target.find("img").get(),function(img){return img.dataset.index|0;}));this.$target.find("img:not([data-index])").each(function(){index++;$(this).attr('data-index',index).data('index',index);});this.$target.attr("contentEditable",false);this._temp_mode=this.$el.find("data-mode").data("mode");this._temp_col=this.$el.find("data-columns").data("columns");},drop_and_build_snippet:function(){var uuid=new Date().getTime();this.$target.find('.carousel').attr('id','slideshow_'+uuid);this.$target.find('[data-target]').attr('data-target','#slideshow_'+uuid);},styling:function(type,value){var classes=this.$el.find('li[data-styling]').map(function(){return $(this).data('styling');}).get().join(' ');this.$target.find("img").removeClass(classes).addClass(value);},interval:function(type,value){this.$target.find('.carousel:first').attr("data-interval",value);},reapply:function(){var self=this,modes=['o_nomode','o_grid','o_masonry','o_slideshow'],classes=this.$target.attr("class").split(/\s+/);this.cancel_masonry();modes.forEach(function(mode){if(classes.indexOf(mode)!=-1){self.mode("reapply",mode.slice(2,Infinity));return;}});this.$target.attr("contentEditable",false);},bind_change:function(){var self=this;return this.$target.find("img").off('save').on('save',function(event,img){var $parent=$(img).parent();$parent.addClass("saved_active");var index=self.$target.find(".item.saved_active").index();$parent.removeClass("saved_active");self.$target.find(".carousel:first li[data-target]:eq("+index+")").css("background-image","url("+$(img).attr("src")+")");});},get_imgs:function(){var imgs=this.$target.find("img").addClass("img img-thumbnail img-responsive mb8 mt8").detach().get();imgs.sort(function(a,b){return $(a).data('index')-$(b).data('index');});return imgs;},mode:function(type,value,$li){if(type!=="reapply"&&type!=="click"&&this._temp_mode===value){return;}
this._temp_mode=value;this.cancel_masonry();if(!value)value='nomode';this[value](type);this.$target.removeClass('o_nomode o_masonry o_grid o_slideshow').addClass("o_"+value);this.bind_change();},replace:function($content){var $container=this.$target.find(".container:first");$container.empty().append($content);return $container;},nomode:function(type){if(type!=="reapply"&&!this.$target.attr('class').match(/o_grid|o_masonry|o_slideshow/))return;var self=this,$row=$('<div class="row"></div>'),$imgs=$(this.get_imgs());this.replace($row);$imgs.each(function(){var $wrap=$(this).wrap('<div>').parent();var img=this;if(img.width>=img.height*2){$wrap.addClass("col-md-6");}else if(img.width>600){$wrap.addClass("col-md-6");}else{$wrap.addClass("col-md-3");}
$row.append($wrap);});this.$target.css("height","");},cancel_masonry:function(){clearTimeout(this.timer);$(this.masonry_imgs).appendTo(this.$target);this.masonry_imgs=[];},masonry:function(type){var self=this,imgs=this.get_imgs(),columns=this.get_columns(),colClass=undefined,$cols=[];var $row=$("<div class='row'/>");this.replace($row);if(columns===0){columns=3;this.$target.attr("data-columns",columns);}
colClass="col-md-"+(12/columns);for(var c=0;c<columns;c++){var $col=$('<div class="col o_snippet_not_selectable"></div>').addClass(colClass);$row.append($col);$cols.push($col.get()[0]);}
imgs.reverse();$cols=$($cols);function add(){self.lowest($cols).append(imgs.pop());if(imgs.length)self.timer=setTimeout(add,0);}
this.masonry_imgs=imgs;if(imgs.length)add();this.$target.css("height","");},grid:function(type){if(type!=="reapply"&&this.$target.hasClass('o_grid'))return;var self=this,$imgs=$(this.get_imgs()),$col,$img,$row=$('<div class="row"></div>'),columns=this.get_columns()||3,colClass="col-md-"+(12/columns),$container=this.replace($row);$imgs.each(function(index){$img=$(this);$col=$img.wrap('<div>').parent();self.img_preserve_styles($img);self.img_responsive($img);$col.addClass(colClass);$col.appendTo($row);if((index+1)%columns===0){$row=$('<div class="row"></div>');$row.appendTo($container);}});this.$target.css("height","");},slideshow:function(type){if(type!=="reapply"&&this.$target.hasClass('o_slideshow'))return;var self=this,$imgs=$(this.get_imgs()),urls=$imgs.map(function(){return $(this).attr("src");}).get();var params={srcs:urls,index:0,title:"",interval:this.$target.data("interval")||false,id:"slideshow_"+new Date().getTime()},$slideshow=$(qweb.render('website.gallery.slideshow',params));this.replace($slideshow);this.$target.find(".item img").each(function(index){$(this).attr('data-index',index).data('index',index);});this.$target.css("height",Math.round(window.innerHeight*0.7));this.$target.off('slide.bs.carousel').off('slid.bs.carousel');this.$target.find('li.fa').off('click');if(this.$target.data("snippet-view",view)){var view=new animation.registry.gallery_slider(this.$target,true);this.$target.data("snippet-view",view);}else{this.$target.data("snippet-view").start(true);}},columns:function(type,value){this.$target.attr("data-columns",value);if(this._temp_col!==value){this._temp_col=value;this.reapply();}},images_add:function(type){if(type!=="click")return;var self=this;var $container=this.$target.find(".container:first");var editor=new widget.MediaDialog(null,{select_images:true},this.$target.closest('.o_editable'),null).open();var index=Math.max(0,_.max(_.map(this.$target.find("img").get(),function(img){return img.dataset.index|0;}))+1);editor.on('save',this,function(attachments){for(var i=0;i<attachments.length;i++){$('<img class="img img-responsive mb8 mt8"/>').attr("src",attachments[i].src).attr('data-index',index+i).data('index',index+i).appendTo($container);}
self.reapply();setTimeout(function(){self.buildingBlock.make_active(self.$target);},0);});},images_rm:function(type){if(type!=="click")return;this.replace($('<div class="alert alert-info css_editable_mode_display"/>').text(_t("Add Images from the 'Customize' menu")));},sizing:function(){},styles_to_preserve:function($img){var styles=['img-rounded','img-thumbnail','img-circle','shadow','fa-spin'];var preserved=[];for(var style in styles){if($img.hasClass(style)){preserved.push(style);}}
return preserved.join(' ');},img_preserve_styles:function($img){var classes=this.styles_to_preserve($img);$img.removeAttr("class");$img.addClass(classes);return $img;},img_responsive:function(img){img.addClass("img img-responsive");return img;},lowest:function($cols){var height=0,min=-1,col=0,lowest=undefined;$cols.each(function(){var $col=$(this);height=$col.height();if(min===-1||height<min){min=height;lowest=$col;}});return lowest;},get_columns:function(){return parseInt(this.$target.attr("data-columns")||3);},clean_for_save:function(){var self=this;if(this.$target.hasClass("slideshow")){this.$target.removeAttr("style");}},set_active:function(){this._super();var classes=_.uniq((this.$target.attr("class").replace(/(^|\s)o_/g,' ')||'').split(/\s+/));var $li=this.$el.find('[data-mode]').removeClass("active").filter('[data-mode="'+classes.join('"], [data-mode="')+'"]').addClass("active");var mode=this.$el.find('[data-mode].active').data('mode');var classes=_.uniq((this.$target.find("img:first").attr("class")||'').split(/\s+/));var $li=this.$el.find('[data-styling]').removeClass("active").filter('[data-styling="'+classes.join('"], [data-styling="')+'"]').addClass("active");this.$el.find('li[data-interval]').removeClass("active").filter('li[data-interval='+this.$target.find(".carousel:first").attr("data-interval")+']').addClass("active");var interval=this.$target.find('.carousel:first').attr("data-interval");var $li=this.$el.find('[data-interval]').removeClass("active").filter('[data-interval='+interval+']').addClass("active");var columns=this.get_columns();var $li=this.$el.find('[data-columns]').removeClass("active").filter('[data-columns='+columns+']').addClass("active");this.$el.find('[data-columns]:first, [data-select_class="spc-none"]').parent().parent().toggle(["grid","masonry"].indexOf(mode)!==-1);this.$el.find('[data-interval]:first').parent().parent().toggle(mode==="slideshow");},});options.registry.gallery_img=options.Class.extend({position:function(type,value){if(type!=="click")return;var $parent=this.$target.closest("section");var editor=$parent.data('snippet-editor').styles.gallery;var imgs=$parent.find('img').get();imgs.sort(function(a,b){return $(a).data('index')-$(b).data('index');});var index=imgs.indexOf(this.$target[0]);switch(value){case'first':index=$(imgs.shift()).data('index')-1;break;case'prev':index=index<=1?$(imgs.shift()).data('index')-1:($(imgs[index-2]).data('index')+$(imgs[index-1]).data('index'))/2;break;case'next':index=index>=imgs.length-2?$(imgs.pop()).data('index')+1:($(imgs[index+2]).data('index')+$(imgs[index+1]).data('index'))/2;break;case'last':index=$(imgs.pop()).data('index')+1;break;}
this.$target.data('index',index);this.buildingBlock.make_active(false);setTimeout(function(){editor.reapply();},0);},on_remove:function(){var $parent=snippet_editor.globalSelector.closest(this.$target.parent());_.defer((function(){this.buildingBlock.make_active($parent);$parent.data('snippet-editor').styles.gallery.reapply();}).bind(this));},on_focus:function(){this._super.apply(this,arguments);if(this._current_src&&this._current_src!==this.$target.attr("src")){_.defer((function(){snippet_editor.globalSelector.closest(this.$target.parent()).data('snippet-editor').styles.gallery.reapply();}).bind(this));}
this._current_src=this.$target.attr("src");},});});;

/* /website_form_builder/static/src/js/snippets.js defined in bundle 'website.assets_editor' */
odoo.define('website_form_builder.snippets',function(require){"use strict";var ajax=require("web.ajax");var base=require('web_editor.base');var core=require('web.core');var data=require("web.data");var Model=require('web.Model');var options=require('web_editor.snippets.options');var widgets=require("website_form_builder.widgets");var _t=core._t;var _fields_asked={},_fields_def={},_models_asked=false,_models_def=$.Deferred(),_templates_loaded=ajax.loadXML("/website_form_builder/static/src/xml/snippets.xml",core.qweb);function available_models(){if(!_models_asked){new Model("ir.model").call("search_read",{domain:[["website_form_access","=",true],],fields:["name","model","website_form_label",],order:"website_form_label",context:base.get_context(),}).done(function(models_list){_models_def.resolve(_.indexBy(models_list,"model"));});_models_asked=true;}
return _models_def;}
function authorized_fields(model){if(!_fields_asked[model]){_fields_def[model]=$.Deferred();available_models().done(function(models){new Model("ir.model").call("get_authorized_fields",[models[model].id],{context:base.get_context()}).done($.proxy(_fields_def[model].resolve,_fields_def[model]));});_fields_asked[model]=true;}
return _fields_def[model];}
var Field=options.Class.extend({start:function(){this._super.apply(this,arguments);this.$inputs=this.$(".o_website_form_input");if(this.data.disable){this.disable_buttons(this.data.disable);}
this.$("label").prop("contentEditable",false).children("span").prop("contentEditable",true);},toggle_class:function(type,value){this._super.apply(this,arguments);if(type==="reset"||value==="o_required"){this.$inputs.attr("required",this.$target.hasClass("o_required"));}
if(type==="click"&&value==="css_non_editable_mode_hidden"&&this.$target.hasClass(value)&&!this.$inputs.filter(":checkbox[selected], :radio[selected],"+"select>option[selected],"+"input[value][value!=''],textarea:parent").length){this.ask_default_value(type);}},ask_default_value:function(type){if(type==="reset"){return;}
var form=new widgets.DefaultValueForm(this,{},this.$target);form.on("save",this,this.set_default_value);return form.open();},set_default_value:function(default_value){var $inputs=this.$inputs;if($inputs.is(":checkbox,:radio")){$inputs.each(function(){$(this).attr("checked",$.inArray($(this).val(),default_value)!==-1);});}else if($inputs.is("select")){$inputs.find("option").each(function(){$(this).attr("selected",$(this).attr("value")===default_value);});}else{$inputs.attr("value",default_value||"");}},disable_buttons:function(selector){var button=this.$overlay.find(selector);button.addClass("disabled");},});var Form=options.Class.extend({init:function(){this._super.apply(this,arguments);this.$form=this.$("form.s_website_form");},clean_for_save:function(){var fields=this.present_fields();this.ensure_section_send();this.$("[data-model-field=false]").each(function(){var $el=$(this),$label=$el.children(".control-label"),$input=$el.find(".o_website_form_input");if(!$label.length){return;}
$input.attr("name",_.str.clean($label.text()));$input.filter(":checkbox, :radio").each(function(){var $box=$(this);$box.attr("value",_.str.clean($box.closest("label").text()));});});this.$("#o_website_form_result").removeAttr("class").empty();this.$(".o_website_form_send").removeClass("disabled");this.$(".has-error").removeClass("has-error");if(fields.length){new Model("ir.model.fields").call("formbuilder_whitelist",[this.controller_data().model_name,fields],{context:base.get_context()},{async:false});}else{this.$target.remove();}},drop_and_build_snippet:function(){this.ask_model();this._super.apply(this,arguments);this.ensure_section_send();},ensure_section_send:function(){var send_section=this.$(".form-group:has(.o_website_form_send)"+":has(#o_website_form_result)");if(send_section.is(":visible")){return;}
this.$(".o_website_form_fields+.form-group").remove();_templates_loaded.done($.proxy(this,"_add_section_send"));},_add_section_send:function(){this.$("form").append(core.qweb.render("website_form_builder.section.send",{option:this}));},ask_model:function(type){if(type==="reset"){return;}
return available_models().done($.proxy(this._ask_model,this));},_ask_model:function(models){var form=new widgets.ParamsForm(this,{},models,this.controller_data().model_name);form.on("save cancel",this,this.set_model);return form.open();},ask_model_field:function(type){if(type==="reset"){return;}
return authorized_fields(this.controller_data().model_name).done($.proxy(this._ask_model_field,this));},_ask_model_field:function(fields){var form=new widgets.ModelFieldForm(this,{},fields,this.present_fields());form.on("save",this,function(infos){_.map(infos,this.add_model_field,this);});return form.open();},add_custom_field:function(type,value,$li){if(type==="reset"){return;}
var name=_.str.sprintf(_t("Custom %s field"),_.str.clean($li.text())),option=_t("Option %d"),field={required:false,help:_.str.sprintf(_t("%s help block"),name),string:name,selection:_.map(_.range(1,5),function(num){return[null,_.str.sprintf(option,num)];}),type:value,};return this._add_field(_.str.sprintf("website_form_builder.field.%s",value),name,field,_.map(_.range(1,5),function(num){return{id:null,display_name:_.str.sprintf(option,num),};}),false);},controller_data:function(){var hidden_data={},attributes=Array.prototype.slice.call(this.$form[0].attributes);for(var attr in attributes){attr=attributes[attr];if(_.str.startsWith(attr.name,'data-form_field_')){hidden_data[attr.name.substr(16)]=attr.value;}}
return{force_action:this.$form.attr("data-force_action"),hidden_data:hidden_data,model_name:this.$form.attr("data-model_name"),success_page:this.$form.attr("data-success_page"),};},present_fields:function(){return _.pluck(this.$(":input[name]"),"name");},set_model:function(model){var previous_model=this.controller_data().model_name;if(!model&&!previous_model){this.$target.remove();return;}
this.$form.attr("data-model_name",model);if(previous_model!==model){authorized_fields(model).done($.proxy(this.reset_model_fields,this));}},reset_model_fields:function(fields){this.$(".o_website_form_fields [data-model-field=true]").remove();for(var name in fields){if(fields[name].required){this.add_model_field({name:name,field:fields[name]});}}},add_model_field:function(info){var relational_data=[],template=_.str.sprintf("website_form_builder.field.%s",info.field.type);if(info.field.type.indexOf("many")!==-1){relational_data=this.relational_options(info.field);}
return $.when(template,info.name,info.field,relational_data,true,_templates_loaded).done($.proxy(this._add_field,this));},_add_field:function(template,name,field,relational_data,model_field){return this.$(".o_website_form_fields").append(core.qweb.render(template,{field:field,model_field:model_field,name:name,relational_data:relational_data,required_att:field.required?"required":null,widget:this,}));},relational_options:function(field){var domain=[],context=base.get_context();try{domain=new data.CompoundDomain(field.domain||[]).eval();}catch(error){console.warn("Cannot evaluate field domain, ignoring.");}
try{context=new data.CompoundContext(base.get_context(),field.context).eval();}catch(error){console.warn("Cannot evaluate field context, using user's.");}
return new Model(field.relation).call("search_read",{domain:domain,fields:["display_name"],order:"display_name",context:context,});},});options.registry.website_form_builder_field=Field;options.registry.website_form_builder_form=Form;return{authorized_fields:authorized_fields,available_models:available_models,Field:Field,Form:Form,};});;

/* /website_form_builder/static/src/js/widgets.js defined in bundle 'website.assets_editor' */
odoo.define('website_form_builder.widgets',function(require){"use strict";var ajax=require("web.ajax");var core=require('web.core');var widget=require("web_editor.widget");var _t=core._t;var Dialog=widget.Dialog;var result=$.Deferred(),_templates_loaded=ajax.loadXML("/website_form_builder/static/src/xml/widgets.xml",core.qweb);var DefaultValueForm=Dialog.extend({template:"website_form_builder.DefaultValueForm",init:function(parent,options,field){this.field_html=$(field).html();var _options=$.extend({},{title:_t("Set field's default value"),size:"small",},options);return this._super(parent,_options);},save:function(){var inputs=this.$(".o_website_form_input");if(inputs.is(":checkbox")){this.final_data=inputs.filter(":checked").map(function(){return $(this).val();}).get();}else{this.final_data=inputs.val();}
this._super.apply(this,arguments);},});var ParamsForm=Dialog.extend({template:"website_form_builder.ParamsForm",init:function(parent,options,models,chosen){this.models=models;this.chosen=chosen;var _options=$.extend({},{title:_t("Form Settings"),size:"small",},options);return this._super(parent,_options);},save:function(){this.final_data=this.$("#model").val();this._super.apply(this,arguments);},});var ModelFieldForm=Dialog.extend({template:"website_form_builder.ModelFieldForm",init:function(parent,options,fields,blacklist){this.fields=fields;this.blacklist=blacklist;var _options=$.extend({},{title:_t("Add Model Fields"),size:"small",},options);return this._super(parent,_options);},save:function(){var names=this.$("#field").val();this.final_data=[];for(var n in names){var name=names[n];this.final_data.push({name:name,field:this.fields[name],});}
this._super.apply(this,arguments);},sorted_fields:function(){var _result=[];for(var name in this.fields){var field=this.fields[name];if(name==="id"||field.readonly||field.type==="one2many"||field.type==="reference"||field.type==="serialized"||this.blacklist.indexOf(name)!==-1){continue;}
_result.push([field.string,name]);}
_result.sort();return _result;},});_templates_loaded.done(function(){result.resolve({DefaultValueForm:DefaultValueForm,ParamsForm:ParamsForm,ModelFieldForm:ModelFieldForm,});});return result;});;

/* /web/static/src/js/framework/data.js defined in bundle 'website.assets_editor' */
odoo.define('web.data',function(require){"use strict";var Class=require('web.Class');var mixins=require('web.mixins');var Model=require('web.Model');var session=require('web.session');var translation=require('web.translation');var pyeval=require('web.pyeval');var utils=require('web.utils');var _t=translation._t;function serialize_sort(criterion){return _.map(criterion,function(criteria){if(criteria[0]==='-'){return criteria.slice(1)+' DESC';}
return criteria+' ASC';}).join(', ');}
function deserialize_sort(criterion){return _.map(criterion,function(criteria){var split=_.without(criteria.split(' '),'');return(split[1]&&split[1].toLowerCase()==='desc'?'-':'')+split[0];});}
var Query=Class.extend({init:function(model,fields){this._model=model;this._fields=fields;this._filter=[];this._context={};this._lazy=true;this._limit=false;this._offset=0;this._order_by=[];},clone:function(to_set){to_set=to_set||{};var q=new Query(this._model,this._fields);q._context=this._context;q._filter=this._filter;q._lazy=this._lazy;q._limit=this._limit;q._offset=this._offset;q._order_by=this._order_by;for(var key in to_set){if(!to_set.hasOwnProperty(key)){continue;}
switch(key){case'filter':q._filter=new CompoundDomain(q._filter,to_set.filter);break;case'context':q._context=new CompoundContext(q._context,to_set.context);break;case'lazy':case'limit':case'offset':case'order_by':q['_'+key]=to_set[key];}}
return q;},_execute:function(options){var self=this;options=options||{};return session.rpc('/web/dataset/search_read',{model:this._model.name,fields:this._fields||false,domain:pyeval.eval('domains',[this._model.domain(this._filter)]),context:pyeval.eval('contexts',[this._model.context(this._context)]),offset:this._offset,limit:this._limit,sort:serialize_sort(this._order_by)},options).then(function(results){self._count=results.length;return results.records;},null);},first:function(options){var self=this;return this.clone({limit:1})._execute(options).then(function(records){delete self._count;if(records.length){return records[0];}
return null;});},all:function(options){return this._execute(options);},count:function(){if(this._count!==undefined){return $.when(this._count);}
return this._model.call('search_count',[this._filter],{context:this._model.context(this._context)});},group_by:function(grouping){var ctx=pyeval.eval('context',this._model.context(this._context));if(_.isUndefined(grouping)){grouping=[];}
if(!(grouping instanceof Array)){grouping=_.toArray(arguments);}
if(_.isEmpty(grouping)&&!ctx.group_by_no_leaf){return null;}
var raw_fields=_.map(grouping.concat(this._fields||[]),function(field){return field.split(':')[0];});var self=this;return this._model.call('read_group',{groupby:grouping,fields:_.uniq(raw_fields),domain:this._model.domain(this._filter),context:ctx,offset:this._offset,lazy:this._lazy,limit:this._limit,orderby:serialize_sort(this._order_by)||false}).then(function(results){return _(results).map(function(result){result.__context=result.__context||{};result.__context.group_by=result.__context.group_by||[];_.defaults(result.__context,ctx);var grouping_fields=self._lazy?[grouping[0]]:grouping;return new QueryGroup(self._model.name,grouping_fields,result);});});},context:function(context){if(!context){return this;}
return this.clone({context:context});},filter:function(domain){if(!domain){return this;}
return this.clone({filter:domain});},lazy:function(lazy){return this.clone({lazy:lazy});},limit:function(limit){return this.clone({limit:limit});},offset:function(offset){return this.clone({offset:offset});},order_by:function(fields){if(fields===undefined){return this;}
if(!(fields instanceof Array)){fields=_.toArray(arguments);}
if(_.isEmpty(fields)){return this;}
return this.clone({order_by:fields});}});var QueryGroup=Class.extend({init:function(model,grouping_fields,read_group_group){var fixed_group=_.extend({__context:{group_by:[]},__domain:[]},read_group_group);var count_key=(grouping_fields[0]&&grouping_fields[0].split(':')[0])+'_count';var aggregates={};_(fixed_group).each(function(value,key){if(key.indexOf('__')===0||_.contains(grouping_fields,key)||(key===count_key)){return;}
aggregates[key]=value||0;});this.model=new Model(model,fixed_group.__context,fixed_group.__domain);var group_size=fixed_group[count_key]||fixed_group.__count||0;var leaf_group=fixed_group.__context.group_by.length===0;var value=(grouping_fields.length===1)?fixed_group[grouping_fields[0]]:_.map(grouping_fields,function(field){return fixed_group[field];});var grouped_on=(grouping_fields.length===1)?grouping_fields[0]:grouping_fields;this.attributes={folded:!!(fixed_group.__fold),grouped_on:grouped_on,length:group_size,value:value,has_children:!(leaf_group&&fixed_group.__context.group_by_no_leaf),aggregates:aggregates};},get:function(key){return this.attributes[key];},subgroups:function(){return this.model.query().group_by(this.model.context().group_by);},query:function(){return this.model.query.apply(this.model,arguments);}});var DataSet=Class.extend(mixins.PropertiesMixin,{init:function(parent,model,context){mixins.PropertiesMixin.init.call(this);this.model=model;this.context=context||{};this.index=null;this._sort=[];this._model=new Model(model,context);this.orderer=new utils.DropMisordered();},previous:function(){this.index-=1;if(!this.ids.length){this.index=null;}else if(this.index<0){this.index=this.ids.length-1;}
return this;},next:function(){this.index+=1;if(!this.ids.length){this.index=null;}else if(this.index>=this.ids.length){this.index=0;}
return this;},select_id:function(id){var idx=this.get_id_index(id);if(idx===null){return false;}else{this.index=idx;return true;}},get_id_index:function(id){for(var i=0,ii=this.ids.length;i<ii;i++){if(id==this.ids[i]){return i;}}
return null;},read_ids:function(ids,fields,options){if(_.isEmpty(ids))
return $.Deferred().resolve([]);options=options||{};var method='read';var ids_arg=ids;var context=this.get_context(options.context);if(options.check_access_rule===true){method='search_read';ids_arg=[['id','in',ids]];context=new CompoundContext(context,{active_test:false});}
return this._model.call(method,[ids_arg,fields||false],{context:context}).then(function(records){if(records.length<=1){return records;}
var indexes={};for(var i=0;i<ids.length;i++){indexes[ids[i]]=i;}
records.sort(function(a,b){return indexes[a.id]-indexes[b.id];});return records;});},read_slice:function(fields,options){var self=this;options=options||{};var query=this._model.query(fields).limit(options.limit||false).offset(options.offset||0).all();return this.orderer.add(query).done(function(records){self.ids=_(records).pluck('id');});},read_index:function(fields,options){options=options||{};return this.read_ids([this.ids[this.index]],fields,options).then(function(records){if(_.isEmpty(records)){return $.Deferred().reject().promise();}
return records[0];});},default_get:function(fields,options){options=options||{};return this._model.call('default_get',[fields],{context:this.get_context(options.context)});},create:function(data,options){var self=this;return this._model.call('create',[data],{context:this.get_context()}).done(function(){self.trigger('dataset_changed',data,options);});},write:function(id,data,options){options=options||{};var self=this;return this._model.call('write',[[id],data],{context:this.get_context(options.context)}).done(function(){self.trigger('dataset_changed',id,data,options);});},unlink:function(ids){var self=this;return this._model.call('unlink',[ids],{context:this.get_context()}).done(function(){self.trigger('dataset_changed',ids);});},call:function(method,args){return this._model.call(method,args);},call_button:function(method,args){return this._model.call_button(method,args);},name_get:function(ids){return this._model.call('name_get',[ids],{context:this.get_context()});},name_search:function(name,domain,operator,limit){return this._model.call('name_search',{name:name||'',args:domain||false,operator:operator||'ilike',context:this._model.context(),limit:limit||0});},name_create:function(name,context){return this._model.call('name_create',[name],{context:this.get_context(context)});},exec_workflow:function(id,signal){return this._model.exec_workflow(id,signal);},get_context:function(request_context){return this._model.context(request_context);},sort:function(field,force_reverse){if(!field){return serialize_sort(this._sort);}
var reverse=force_reverse||(this._sort[0]===field);this._sort.splice.apply(this._sort,[0,this._sort.length].concat(_.without(this._sort,field,'-'+field)));this._sort.unshift((reverse?'-':'')+field);return undefined;},set_sort:function(fields_list){this._sort=deserialize_sort(fields_list);},size:function(){return this.ids.length;},alter_ids:function(n_ids){this.ids=n_ids;},remove_ids:function(ids){this.alter_ids(_(this.ids).difference(ids));},add_ids:function(ids,at){var args=[at,0].concat(_.difference(ids,this.ids));this.ids.splice.apply(this.ids,args);},resequence:function(ids,options){options=options||{};return session.rpc('/web/dataset/resequence',{model:this.model,ids:ids,context:pyeval.eval('context',this.get_context(options.context)),}).then(function(results){return results;});},});var DataSetStatic=DataSet.extend({init:function(parent,model,context,ids){this._super(parent,model,context);this.ids=ids||[];},read_slice:function(fields,options){options=options||{};fields=fields||{};var offset=options.offset||0,limit=options.limit||false;var end_pos=limit&&limit!==-1?offset+limit:this.ids.length;return this.read_ids(this.ids.slice(offset,end_pos),fields,options);},set_ids:function(ids){this.ids=ids;if(ids.length===0){this.index=null;}else if(this.index>=ids.length-1){this.index=ids.length-1;}},unlink:function(ids){this.set_ids(_.without.apply(null,[this.ids].concat(ids)));this.trigger('unlink',ids);return $.Deferred().resolve({result:true});},});var DataSetSearch=DataSet.extend({init:function(parent,model,context,domain){this._super(parent,model,context);this.domain=domain||[];this._length=null;this.ids=[];this._model=new Model(model,context,domain);},read_slice:function(fields,options){options=options||{};var self=this;var q=this._model.query(fields||false).filter(options.domain).context(options.context).offset(options.offset||0).limit(options.limit||false);q=q.order_by.apply(q,this._sort);return this.orderer.add(q.all()).done(function(records){q.count().done(function(count){self._length=count;});self.ids=_(records).pluck('id');});},get_domain:function(other_domain){return this._model.domain(other_domain);},alter_ids:function(ids){this._super(ids);if(this.index!==null&&this.index>=this.ids.length){this.index=this.ids.length>0?this.ids.length-1:0;}},remove_ids:function(ids){var before=this.ids.length;this._super(ids);if(this._length){this._length-=(before-this.ids.length);}},add_ids:function(ids,at){var before=this.ids.length;this._super(ids,at);if(this._length){this._length+=(this.ids.length-before);}},unlink:function(ids,callback,error_callback){var self=this;return this._super(ids).done(function(){self.remove_ids(ids);self.trigger("dataset_changed",ids,callback,error_callback);});},size:function(){if(this._length!==null){return this._length;}
return this._super();}});var BufferedDataSet=DataSetStatic.extend({virtual_id_prefix:"one2many_v_id_",debug_mode:true,init:function(){this._super.apply(this,arguments);this.reset_ids([]);this.last_default_get={};this.running_reads=[];this.mutex=new utils.Mutex();},default_get:function(fields,options){var self=this;return this._super(fields,options).done(function(res){self.last_default_get=_.clone(res);});},get_cache:function(id){if(!this.cache[id]){this.cache[id]={'id':id,'values':{},'from_read':{},'changes':{},'readonly_fields':{},'to_create':false,'to_delete':false};}
return this.cache[id];},_update_cache:function(id,options){var cached=this.get_cache(id);if(options){_.extend(cached.from_read,options.from_read);_.extend(cached.changes,options.changes);_.extend(cached.readonly_fields,options.readonly_fields);if(options.to_create!==undefined)cached.to_create=options.to_create;if(options.to_delete!==undefined)cached.to_delete=options.to_delete;}
cached.values=_.extend({'id':id},cached.from_read,cached.changes,cached.readonly_fields);return cached;},create:function(data,options){var changes=_.extend({},this.last_default_get,data);var cached=this._update_cache(_.uniqueId(this.virtual_id_prefix),_.extend({'changes':changes,'to_create':true},options));this.trigger("dataset_changed",data,options);return $.Deferred().resolve(cached.id);},write:function(id,data,options){var self=this;var cached=this.get_cache(id);cached.to_delete=false;var def=$.Deferred();this.mutex.exec(function(){var dirty=false;for(var k in data){if(!_.isEqual(data[k],cached.values[k])){dirty=true;if(_.isEqual(data[k],cached.from_read[k])){delete cached.changes[k];}else{cached.changes[k]=data[k];}}else{delete data[k];}}
self._update_cache(id,options);if(dirty){self.trigger("dataset_changed",id,data,options);}
return def.resolve(data).promise();});return def;},unlink:function(ids,callback,error_callback){var self=this;_.each(ids,function(id){self.get_cache(id).to_delete=true;});this.set_ids(_.difference(this.ids,_.pluck(_.filter(this.cache,function(c){return c.to_delete;}),'id')));this.trigger("dataset_changed",ids,callback,error_callback);return utils.async_when({result:true}).done(callback);},reset_ids:function(ids,options){var self=this;this.set_ids(ids);if(!options||!options.keep_read_data){this.cache={};}else{_.each(this.cache,function(cache){self._update_cache(cache.id,{'changes':{},'to_delete':false});});}
this.delete_all=false;this.cancel_read();},cancel_read:function(){_.invoke(_.clone(this.running_reads),'reject');},read_ids:function(ids,fields,options){var self=this;var to_get=_.filter(ids,function(id){var cache=self.get_cache(id);return!cache.to_create&&_.any(fields,function(x){return cache.from_read[x]===undefined;});});options=options||{};var return_records=function(){var records=_.map(ids,function(id){return _.clone(self.get_cache(id).values);});if(self.debug_mode){if(_.include(records,undefined)){throw"Record not correctly loaded";}}
var sort_fields=self._sort,compare=function(v1,v2){return(v1<v2)?-1:(v1>v2)?1:0;};if(sort_fields.length){records.sort(function(a,b){return _.reduce(sort_fields,function(acc,field){if(acc){return acc;}
var sign=1;if(field[0]==='-'){sign=-1;field=field.slice(1);}
if(!a[field]&&a[field]!==0){return sign;}
if(!b[field]&&b[field]!==0){return(sign==-1)?1:-1;}
if(_.isArray(a[field])&&a[field].length==2&&_.isString(a[field][1])){return sign*compare(a[field][1],b[field][1]);}
return sign*compare(a[field],b[field]);},0);});}
return $.when(records);};if(to_get.length>0){var def=$.Deferred();self.running_reads.push(def);def.always(function(){self.running_reads=_.without(self.running_reads,def);});var _super=this._super;this.mutex.exec(function(){if(def.state()!=="pending")return;_super.call(self,to_get,fields,options).then(_.bind(def.resolve,def),_.bind(def.reject,def));return def;});return def.then(function(records){_.each(records,function(record,index){var id=to_get[index];self._update_cache(id,_.extend(options,{'from_read':record}));});return return_records();});}else{return return_records();}},evict_record:function(id){this.get_cache(id).from_read={};this._update_cache(id);},call_button:function(method,args){this.evict_record(args[0][0]);return this._super(method,args);},exec_workflow:function(id,signal){this.evict_record(id);return this._super(id,signal);},alter_ids:function(n_ids,options){var dirty=!_.isEqual(this.ids,n_ids);this._super(n_ids,options);if(dirty){this.trigger("dataset_changed",n_ids,options);}},});BufferedDataSet.virtual_id_regex=/^one2many_v_id_.*$/;var ProxyDataSet=DataSetSearch.extend({init:function(){this._super.apply(this,arguments);this.create_function=null;this.write_function=null;this.read_function=null;this.default_get_function=null;this.unlink_function=null;},read_ids:function(ids,fields,options){if(this.read_function){return this.read_function(ids,fields,options,this._super);}else{return this._super.apply(this,arguments);}},default_get:function(fields,options){if(this.default_get_function){return this.default_get_function(fields,options,this._super);}else{return this._super.apply(this,arguments);}},create:function(data,options){if(this.create_function){return this.create_function(data,options,this._super);}else{return this._super.apply(this,arguments);}},write:function(id,data,options){if(this.write_function){return this.write_function(id,data,options,this._super);}else{return this._super.apply(this,arguments);}},unlink:function(ids){if(this.unlink_function){return this.unlink_function(ids,this._super);}else{return this._super.apply(this,arguments);}},});var CompoundContext=Class.extend({init:function(){this.__ref="compound_context";this.__contexts=[];this.__eval_context=null;var self=this;_.each(arguments,function(x){self.add(x);});},add:function(context){this.__contexts.push(context);return this;},set_eval_context:function(eval_context){this.__eval_context=eval_context;return this;},get_eval_context:function(){return this.__eval_context;},eval:function(){return pyeval.eval('context',this,undefined,{no_user_context:true});},});var CompoundDomain=Class.extend({init:function(){this.__ref="compound_domain";this.__domains=[];this.__eval_context=null;var self=this;_.each(arguments,function(x){self.add(x);});},add:function(domain){this.__domains.push(domain);return this;},set_eval_context:function(eval_context){this.__eval_context=eval_context;return this;},get_eval_context:function(){return this.__eval_context;},eval:function(){return pyeval.eval('domain',this);},});function compute_domain(expr,fields){if(!(expr instanceof Array))
return!!expr;var stack=[];for(var i=expr.length-1;i>=0;i--){var ex=expr[i];if(ex.length==1){var top=stack.pop();switch(ex){case'|':stack.push(stack.pop()||top);continue;case'&':stack.push(stack.pop()&&top);continue;case'!':stack.push(!top);continue;default:throw new Error(_.str.sprintf(_t("Unknown operator %s in domain %s"),ex,JSON.stringify(expr)));}}
var field=fields[ex[0]];if(!field){throw new Error(_.str.sprintf(_t("Unknown field %s in domain %s"),ex[0],JSON.stringify(expr)));}
var field_value=field.get_value?field.get_value():field.value;var op=ex[1];var val=ex[2];switch(op.toLowerCase()){case'=':case'==':stack.push(_.isEqual(field_value,val));break;case'!=':case'<>':stack.push(!_.isEqual(field_value,val));break;case'<':stack.push(field_value<val);break;case'>':stack.push(field_value>val);break;case'<=':stack.push(field_value<=val);break;case'>=':stack.push(field_value>=val);break;case'in':if(!_.isArray(val))val=[val];stack.push(_(val).contains(field_value));break;case'not in':if(!_.isArray(val))val=[val];stack.push(!_(val).contains(field_value));break;default:console.warn(_t("Unsupported operator %s in domain %s"),op,JSON.stringify(expr));}}
return _.all(stack,_.identity);}
return{Query:Query,DataSet:DataSet,DataSetStatic:DataSetStatic,DataSetSearch:DataSetSearch,BufferedDataSet:BufferedDataSet,ProxyDataSet:ProxyDataSet,CompoundContext:CompoundContext,CompoundDomain:CompoundDomain,compute_domain:compute_domain,noDisplayContent:"<em class=\"text-warning\">"+_t("Unnamed")+"</em>",};});;

/* /web/static/lib/py.js/lib/py.js defined in bundle 'website.assets_editor' */
var py={};(function(py){var create=function(o,props){function F(){}
F.prototype=o;var inst=new F;if(props){for(var name in props){if(!props.hasOwnProperty(name)){continue;}
inst[name]=props[name];}}
return inst;};var symbols={};var comparators={};var Base={nud:function(){throw new Error(this.id+" undefined as prefix");},led:function(led){throw new Error(this.id+" undefined as infix");},toString:function(){if(this.id==='(constant)'||this.id==='(number)'||this.id==='(name)'||this.id==='(string)'){return[this.id.slice(0,this.id.length-1),' ',this.value,')'].join('');}else if(this.id==='(end)'){return'(end)';}else if(this.id==='(comparator)'){var repr=['(comparator',this.expressions[0]];for(var i=0;i<this.operators.length;++i){repr.push(this.operators[i],this.expressions[i+1]);}
return repr.join(' ')+')';}
var out=[this.id,this.first,this.second,this.third].filter(function(r){return r}).join(' ');return'('+out+')';}};function symbol(id,bp){bp=bp||0;var s=symbols[id];if(s){if(bp>s.lbp){s.lbp=bp;}
return s;}
return symbols[id]=create(Base,{id:id,lbp:bp});}
function constant(id){var s=symbol(id);s.id='(constant)';s.value=id;s.nud=function(){return this;};}
function prefix(id,bp,nud){symbol(id).nud=nud||function(){this.first=expression(bp);return this}}
function infix(id,bp,led){symbol(id,bp).led=led||function(left){this.first=left;this.second=expression(bp);return this;}}
function infixr(id,bp){symbol(id,bp).led=function(left){this.first=left;this.second=expression(bp-1);return this;}}
function comparator(id){comparators[id]=true;var bp=60;infix(id,bp,function(left){this.id='(comparator)';this.operators=[id];this.expressions=[left,expression(bp)];while(token.id in comparators){this.operators.push(token.id);advance();this.expressions.push(expression(bp));}
return this;});}
constant('None');constant('False');constant('True');symbol('(number)').nud=function(){return this;};symbol('(name)').nud=function(){return this;};symbol('(string)').nud=function(){return this;};symbol('(end)');symbol(':');symbol(')');symbol(']');symbol('}');symbol(',');symbol('else');infix('=',10,function(left){if(left.id!=='(name)'){throw new Error("Expected keyword argument name, got "+token.id);}
this.first=left;this.second=expression();return this;});symbol('lambda',20).nud=function(){this.first=[];if(token.id!==':'){for(;;){if(token.id!=='(name)'){throw new Error('Excepted an argument name');}
this.first.push(token);advance();if(token.id!==','){break;}
advance(',');}}
advance(':');this.second=expression();return this;};infix('if',20,function(left){this.first=left;this.second=expression();advance('else');this.third=expression();return this;});infixr('or',30);infixr('and',40);prefix('not',50);comparator('in');comparator('not in');comparator('is');comparator('is not');comparator('<');comparator('<=');comparator('>');comparator('>=');comparator('<>');comparator('!=');comparator('==');infix('|',70);infix('^',80);infix('&',90);infix('<<',100);infix('>>',100);infix('+',110);infix('-',110);infix('*',120);infix('/',120);infix('//',120);infix('%',120);prefix('-',130);prefix('+',130);prefix('~',130);infixr('**',140);infix('.',150,function(left){if(token.id!=='(name)'){throw new Error('Expected attribute name, got '+token.id);}
this.first=left;this.second=token;advance();return this;});symbol('(',150).nud=function(){this.first=[];var comma=false;if(token.id!==')'){while(true){if(token.id===')'){break;}
this.first.push(expression());if(token.id!==','){break;}
comma=true;advance(',');}}
advance(')');if(!this.first.length||comma){return this;}else{return this.first[0];}};symbol('(').led=function(left){this.first=left;this.second=[];if(token.id!==")"){for(;;){this.second.push(expression());if(token.id!==','){break;}
advance(',');}}
advance(")");return this;};infix('[',150,function(left){this.first=left;this.second=expression();advance("]");return this;});symbol('[').nud=function(){this.first=[];if(token.id!==']'){for(;;){if(token.id===']'){break;}
this.first.push(expression());if(token.id!==','){break;}
advance(',');}}
advance(']');return this;};symbol('{').nud=function(){this.first=[];if(token.id!=='}'){for(;;){if(token.id==='}'){break;}
var key=expression();advance(':');var value=expression();this.first.push([key,value]);if(token.id!==','){break;}
advance(',');}}
advance('}');return this;};py.tokenize=(function(){function group(){return'('+Array.prototype.join.call(arguments,'|')+')';}
var Whitespace='[ \\f\\t]*';var Name='[a-zA-Z_]\\w*';var DecNumber='\\d+(L|l)?';var IntNumber=DecNumber;var PointFloat=group('\\d+\\.\\d*','\\.\\d+');var FloatNumber=PointFloat;var Number=group(FloatNumber,IntNumber);var Operator=group("\\*\\*=?",">>=?","<<=?","<>","!=","//=?","[+\\-*/%&|^=<>]=?","~");var Bracket='[\\[\\]\\(\\)\\{\\}]';var Special='[:;.,`@]';var Funny=group(Operator,Bracket,Special);var ContStr=group("([uU])?'([^']*)'",'([uU])?"([^"]*)"');var PseudoToken=Whitespace+group(Number,Funny,ContStr,Name);var number_pattern=new RegExp('^'+Number+'$');var string_pattern=new RegExp('^'+ContStr+'$');var name_pattern=new RegExp('^'+Name+'$');var strip=new RegExp('^'+Whitespace);return function tokenize(s){var max=s.length,tokens=[],start,end=undefined;var pseudoprog=new RegExp(PseudoToken,'g');while(pseudoprog.lastIndex<max){var pseudomatch=pseudoprog.exec(s);if(!pseudomatch){if(/^\s+$/.test(s.slice(end))){break;}
throw new Error('Failed to tokenize <<'+s
+'>> at index '+(end||0)
+'; parsed so far: '+tokens);}
start=pseudomatch.index;end=pseudoprog.lastIndex;var token=s.slice(start,end).replace(strip,'');var initial=token[0];if(number_pattern.test(token)){tokens.push(create(symbols['(number)'],{value:parseFloat(token)}));}else if(string_pattern.test(token)){var m=string_pattern.exec(token);tokens.push(create(symbols['(string)'],{unicode:!!(m[2]||m[4]),value:(m[3]!==undefined?m[3]:m[5])}));}else if(token in symbols){var symbol;if(token==='in'&&tokens.length>1&&tokens[tokens.length-1].id==='not'){symbol=symbols['not in'];tokens.pop();}else if(token==='not'&&tokens.length>1&&tokens[tokens.length-1].id==='is'){symbol=symbols['is not'];tokens.pop();}else{symbol=symbols[token];}
tokens.push(create(symbol));}else if(name_pattern.test(token)){tokens.push(create(symbols['(name)'],{value:token}));}else{throw new Error("Tokenizing failure of <<"+s+">> at index "+start
+" for token [["+token+"]]"
+"; parsed so far: "+tokens);}}
tokens.push(create(symbols['(end)']));return tokens;}})();var token,next;function expression(rbp){rbp=rbp||0;var t=token;token=next();var left=t.nud();while(rbp<token.lbp){t=token;token=next();left=t.led(left);}
return left;}
function advance(id){if(id&&token.id!==id){throw new Error('Expected "'+id+'", got "'+token.id+'"');}
token=next();}
function PY_ensurepy(val,name){switch(val){case undefined:throw new Error("NameError: name '"+name+"' is not defined");case null:return py.None;case true:return py.True;case false:return py.False;}
var fn=function(){};fn.prototype=py.object;if(py.PY_isInstance(val,py.object)||py.PY_isSubclass(val,py.object)){return val;}
switch(typeof val){case'number':return py.float.fromJSON(val);case'string':return py.str.fromJSON(val);case'function':return py.PY_def.fromJSON(val);}
switch(val.constructor){case Object:var o=py.PY_call(py.object);for(var prop in val){if(val.hasOwnProperty(prop)){o[prop]=val[prop];}}
return o;case Array:return py.list.fromJSON(val);}
throw new Error("Could not convert "+val+" to a pyval");}
var typename=function(obj){if(obj.__class__){return obj.__class__.__name__;}else if(typeof obj!=='object'){return typeof obj;}else{return obj.constructor.name;}};py.py={};py.PY_parseArgs=function PY_parseArgs(argument,format){var out={};var args=argument[0];var kwargs={};for(var k in argument[1]){if(!argument[1].hasOwnProperty(k)){continue;}
kwargs[k]=argument[1][k];}
if(typeof format==='string'){format=format.split(/\s+/);}
var name=function(spec){if(typeof spec==='string'){return spec;}else if(spec instanceof Array&&spec.length===2){return spec[0];}
throw new Error("TypeError: unknown format specification "+
JSON.stringify(spec));};var spec;for(var i=0;i<args.length;++i){spec=format[i];if(!spec||spec==='*'){throw new Error("TypeError: function takes exactly "+(i-1)+" positional arguments ("+args.length+" given")}else if(/^\*\w/.test(spec)){out[name(spec.slice(1))]=args.slice(i);break;}
out[name(spec)]=args[i];}
for(var j=i;j<format.length;++j){spec=format[j];var n=name(spec);if(n in out){throw new Error("TypeError: function got multiple values "+"for keyword argument '"+kwarg+"'");}
if(/^\*\*\w/.test(n)){out[n.slice(2)]=kwargs;kwargs={};break;}
if(n in kwargs){out[n]=kwargs[n];delete kwargs[n];}}
for(var key in kwargs){throw new Error("TypeError: function got an unexpected keyword argument '"
+key+"'");}
var kwonly=0;for(var k=0;k<format.length;++k){if(/^\*/.test(format[k])){kwonly=1;break;}}
for(var k=0;k<format.length;++k){spec=format[k];var n=name(spec);if(/^\*/.test(n)||n in out){continue;}
if(!(spec instanceof Array)){throw new Error("TypeError: function takes exactly "+(format.length-kwonly)
+" arguments");}
out[n]=spec[1];}
return out;};py.PY_hasAttr=function(o,attr_name){try{py.PY_getAttr(o,attr_name);return true;}catch(e){return false;}};py.PY_getAttr=function(o,attr_name){return PY_ensurepy(o.__getattribute__(attr_name));};py.PY_str=function(o){var v=o.__str__();if(py.PY_isInstance(v,py.str)){return v;}
throw new Error('TypeError: __str__ returned non-string (type '
+typename(v)
+')');};py.PY_isInstance=function(inst,cls){var fn=function(){};fn.prototype=cls;return inst instanceof fn;};py.PY_isSubclass=function(derived,cls){var fn=function(){};fn.prototype=cls;return derived===cls||derived instanceof fn;};py.PY_call=function(callable,args,kwargs){if(!args){args=[];}
if(typeof args==='object'&&!(args instanceof Array)){kwargs=args;args=[];}
if(!kwargs){kwargs={};}
if(callable.__is_type){var instance=callable.__new__.call(callable,args,kwargs);var typ=function(){};typ.prototype=callable;if(instance instanceof typ){instance.__init__.call(instance,args,kwargs);}
return instance}
return callable.__call__(args,kwargs);};py.PY_isTrue=function(o){var res=o.__nonzero__();if(res===py.True){return true;}
if(res===py.False){return false;}
throw new Error("TypeError: __nonzero__ should return bool, returned "
+typename(res));};py.PY_not=function(o){return!py.PY_isTrue(o);};py.PY_size=function(o){if(!o.__len__){throw new Error("TypeError: object of type '"+
typename(o)+"' has no len()");}
var v=o.__len__();if(typeof v!=='number'){throw new Error("TypeError: a number is required");}
return v;};py.PY_getItem=function(o,key){if(!('__getitem__'in o)){throw new Error("TypeError: '"+typename(o)+"' object is unsubscriptable")}
if(!py.PY_isInstance(key,py.object)){throw new Error("TypeError: '"+typename(key)+"' is not a py.js object");}
var res=o.__getitem__(key);if(!py.PY_isInstance(key,py.object)){throw new Error("TypeError: __getitem__ must return a py.js object, got "
+typename(res));}
return res;};py.PY_setItem=function(o,key,v){if(!('__setitem__'in o)){throw new Error("TypeError: '"+typename(o)+"' object does not support item assignment");}
if(!py.PY_isInstance(key,py.object)){throw new Error("TypeError: '"+typename(key)+"' is not a py.js object");}
if(!py.PY_isInstance(v,py.object)){throw new Error("TypeError: '"+typename(v)+"' is not a py.js object");}
o.__setitem__(key,v);};py.PY_add=function(o1,o2){return PY_op(o1,o2,'+');};py.PY_subtract=function(o1,o2){return PY_op(o1,o2,'-');};py.PY_multiply=function(o1,o2){return PY_op(o1,o2,'*');};py.PY_divide=function(o1,o2){return PY_op(o1,o2,'/');};py.PY_negative=function(o){if(!o.__neg__){throw new Error("TypeError: bad operand for unary -: '"
+typename(o)
+"'");}
return o.__neg__();};py.PY_positive=function(o){if(!o.__pos__){throw new Error("TypeError: bad operand for unary +: '"
+typename(o)
+"'");}
return o.__pos__();};py.type=function type(name,bases,dict){if(typeof name!=='string'){throw new Error("ValueError: a class name should be a string");}
if(!bases||bases.length===0){bases=[py.object];}else if(bases.length>1){throw new Error("ValueError: can't provide multiple bases for a "
+"new type");}
var base=bases[0];var ClassObj=create(base);if(dict){for(var k in dict){if(!dict.hasOwnProperty(k)){continue;}
ClassObj[k]=dict[k];}}
ClassObj.__class__=ClassObj;ClassObj.__name__=name;ClassObj.__bases__=bases;ClassObj.__is_type=true;return ClassObj;};py.type.__call__=function(){var args=py.PY_parseArgs(arguments,['object']);return args.object.__class__;};var hash_counter=0;py.object=py.type('object',[{}],{__new__:function(){var inst=create(this);inst.__is_type=false;return inst;},__init__:function(){},__hash__:function(){if(this._hash){return this._hash;}
return this._hash='\0\0\0'+String(hash_counter++);},__eq__:function(other){return(this===other)?py.True:py.False;},__ne__:function(other){if(py.PY_isTrue(this.__eq__(other))){return py.False;}else{return py.True;}},__lt__:function(){return py.NotImplemented;},__le__:function(){return py.NotImplemented;},__ge__:function(){return py.NotImplemented;},__gt__:function(){return py.NotImplemented;},__str__:function(){return this.__unicode__();},__unicode__:function(){return py.str.fromJSON('<'+typename(this)+' object>');},__nonzero__:function(){return py.True;},__getattribute__:function(name){if(name in this){var val=this[name];if(typeof val==='object'&&'__get__'in val){return val.__get__(this,py.PY_call(py.type,[this]));}
if(typeof val==='function'&&!this.hasOwnProperty(name)){return PY_instancemethod.fromJSON(val,this);}
return val;}
if('__getattr__'in this){return this.__getattr__(name);}
throw new Error("AttributeError: object has no attribute '"+name+"'");},__setattr__:function(name,value){if(name in this&&'__set__'in this[name]){this[name].__set__(this,value);}
this[name]=value;},toJSON:function(){throw new Error(this.constructor.name+' can not be converted to JSON');}});var NoneType=py.type('NoneType',null,{__nonzero__:function(){return py.False;},toJSON:function(){return null;}});py.None=py.PY_call(NoneType);var NotImplementedType=py.type('NotImplementedType',null,{});py.NotImplemented=py.PY_call(NotImplementedType);var booleans_initialized=false;py.bool=py.type('bool',null,{__new__:function(){if(!booleans_initialized){return py.object.__new__.apply(this);}
var ph={};var args=py.PY_parseArgs(arguments,[['value',ph]]);if(args.value===ph){return py.False;}
return py.PY_isTrue(args.value)?py.True:py.False;},__str__:function(){return py.str.fromJSON((this===py.True)?"True":"False");},__nonzero__:function(){return this;},fromJSON:function(val){return val?py.True:py.False},toJSON:function(){return this===py.True;}});py.True=py.PY_call(py.bool);py.False=py.PY_call(py.bool);booleans_initialized=true;py.float=py.type('float',null,{__init__:function(){var placeholder={};var args=py.PY_parseArgs(arguments,[['value',placeholder]]);var value=args.value;if(value===placeholder){this._value=0;return;}
if(py.PY_isInstance(value,py.float)){this._value=value._value;}
if(py.PY_isInstance(value,py.object)&&'__float__'in value){var res=value.__float__();if(py.PY_isInstance(res,py.float)){this._value=res._value;return;}
throw new Error('TypeError: __float__ returned non-float (type '+
typename(res)+')');}
throw new Error('TypeError: float() argument must be a string or a number');},__str__:function(){return py.str.fromJSON(String(this._value));},__eq__:function(other){return this._value===other._value?py.True:py.False;},__lt__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return this._value<other._value?py.True:py.False;},__le__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return this._value<=other._value?py.True:py.False;},__gt__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return this._value>other._value?py.True:py.False;},__ge__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return this._value>=other._value?py.True:py.False;},__abs__:function(){return py.float.fromJSON(Math.abs(this._value));},__add__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return py.float.fromJSON(this._value+other._value);},__neg__:function(){return py.float.fromJSON(-this._value);},__sub__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return py.float.fromJSON(this._value-other._value);},__mul__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return py.float.fromJSON(this._value*other._value);},__div__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
return py.float.fromJSON(this._value/other._value);},__nonzero__:function(){return this._value?py.True:py.False;},fromJSON:function(v){if(!(typeof v==='number')){throw new Error('py.float.fromJSON can only take numbers');}
var instance=py.PY_call(py.float);instance._value=v;return instance;},toJSON:function(){return this._value;}});py.str=py.type('str',null,{__init__:function(){var placeholder={};var args=py.PY_parseArgs(arguments,[['value',placeholder]]);var s=args.value;if(s===placeholder){this._value='';return;}
this._value=py.PY_str(s)._value;},__hash__:function(){return'\1\0\1'+this._value;},__str__:function(){return this;},__eq__:function(other){if(py.PY_isInstance(other,py.str)&&this._value===other._value){return py.True;}
return py.False;},__lt__:function(other){if(py.PY_not(py.PY_call(py.isinstance,[other,py.str]))){return py.NotImplemented;}
return this._value<other._value?py.True:py.False;},__le__:function(other){if(!py.PY_isInstance(other,py.str)){return py.NotImplemented;}
return this._value<=other._value?py.True:py.False;},__gt__:function(other){if(!py.PY_isInstance(other,py.str)){return py.NotImplemented;}
return this._value>other._value?py.True:py.False;},__ge__:function(other){if(!py.PY_isInstance(other,py.str)){return py.NotImplemented;}
return this._value>=other._value?py.True:py.False;},__add__:function(other){if(!py.PY_isInstance(other,py.str)){return py.NotImplemented;}
return py.str.fromJSON(this._value+other._value);},__nonzero__:function(){return this._value.length?py.True:py.False;},__contains__:function(s){return(this._value.indexOf(s._value)!==-1)?py.True:py.False;},fromJSON:function(s){if(typeof s==='string'){var instance=py.PY_call(py.str);instance._value=s;return instance;}
throw new Error("str.fromJSON can only take strings");},toJSON:function(){return this._value;}});py.tuple=py.type('tuple',null,{__init__:function(){this._values=[];},__len__:function(){return this._values.length;},__nonzero__:function(){return py.PY_size(this)>0?py.True:py.False;},__contains__:function(value){for(var i=0,len=this._values.length;i<len;++i){if(py.PY_isTrue(this._values[i].__eq__(value))){return py.True;}}
return py.False;},__getitem__:function(index){return this._values[index.toJSON()];},toJSON:function(){var out=[];for(var i=0;i<this._values.length;++i){out.push(this._values[i].toJSON());}
return out;},fromJSON:function(ar){if(!(ar instanceof Array)){throw new Error("Can only create a py.tuple from an Array");}
var t=py.PY_call(py.tuple);for(var i=0;i<ar.length;++i){t._values.push(PY_ensurepy(ar[i]));}
return t;}});py.list=py.type('list',null,{__nonzero__:function(){return this.__len__>0?py.True:py.False;},});_.defaults(py.list,py.tuple)
py.dict=py.type('dict',null,{__init__:function(){this._store={};},__getitem__:function(key){var h=key.__hash__();if(!(h in this._store)){throw new Error("KeyError: '"+key.toJSON()+"'");}
return this._store[h][1];},__setitem__:function(key,value){this._store[key.__hash__()]=[key,value];},__len__:function(){return Object.keys(this._store).length},__nonzero__:function(){return py.PY_size(this)>0?py.True:py.False;},get:function(){var args=py.PY_parseArgs(arguments,['k',['d',py.None]]);var h=args.k.__hash__();if(!(h in this._store)){return args.d;}
return this._store[h][1];},fromJSON:function(d){var instance=py.PY_call(py.dict);for(var k in(d||{})){if(!d.hasOwnProperty(k)){continue;}
instance.__setitem__(py.str.fromJSON(k),PY_ensurepy(d[k]));}
return instance;},toJSON:function(){var out={};for(var k in this._store){var item=this._store[k];out[item[0].toJSON()]=item[1].toJSON();}
return out;}});py.PY_def=py.type('function',null,{__call__:function(){return this._func.apply(this._inst,arguments);},fromJSON:function(nativefunc){var instance=py.PY_call(py.PY_def);instance._inst=null;instance._func=nativefunc;return instance;},toJSON:function(){return this._func;}});py.classmethod=py.type('classmethod',null,{__init__:function(){var args=py.PY_parseArgs(arguments,'function');this._func=args['function'];},__get__:function(obj,type){return PY_instancemethod.fromJSON(this._func,type);},fromJSON:function(func){return py.PY_call(py.classmethod,[func]);}});var PY_instancemethod=py.type('instancemethod',[py.PY_def],{fromJSON:function(nativefunc,instance){var inst=py.PY_call(PY_instancemethod);inst._inst=instance;inst._func=nativefunc;return inst;}});py.abs=new py.PY_def.fromJSON(function abs(){var args=py.PY_parseArgs(arguments,['number']);if(!args.number.__abs__){throw new Error("TypeError: bad operand type for abs(): '"
+typename(args.number)
+"'");}
return args.number.__abs__();});py.len=new py.PY_def.fromJSON(function len(){var args=py.PY_parseArgs(arguments,['object']);return py.float.fromJSON(py.PY_size(args.object));});py.isinstance=new py.PY_def.fromJSON(function isinstance(){var args=py.PY_parseArgs(arguments,['object','class']);return py.PY_isInstance(args.object,args['class'])?py.True:py.False;});py.issubclass=new py.PY_def.fromJSON(function issubclass(){var args=py.PY_parseArgs(arguments,['C','B']);return py.PY_isSubclass(args.C,args.B)?py.True:py.False;});var PY_decode_string_literal=function(str,unicode){var out=[],code;var direct_map={'\\':'\\','"':'"',"'":"'",'a':'\x07','b':'\x08','f':'\x0c','n':'\n','r':'\r','t':'\t','v':'\v'};for(var i=0;i<str.length;++i){if(str[i]!=='\\'){out.push(str[i]);continue;}
var escape=str[i+1];if(escape in direct_map){out.push(direct_map[escape]);++i;continue;}
switch(escape){case'\n':++i;continue;case'N':if(!unicode){break;}
throw Error("SyntaxError: \\N{} escape not implemented");case'u':if(!unicode){break;}
var uni=str.slice(i+2,i+6);if(!/[0-9a-f]{4}/i.test(uni)){throw new Error(["SyntaxError: (unicode error) 'unicodeescape' codec"," can't decode bytes in position ",i,"-",i+4,": truncated \\uXXXX escape"].join(''));}
code=parseInt(uni,16);out.push(String.fromCharCode(code));i+=5;continue;case'U':if(!unicode){break;}
throw Error("SyntaxError: \\U escape not implemented");case'x':var hex=str.slice(i+2,i+4);if(!/[0-9a-f]{2}/i.test(hex)){if(!unicode){throw new Error('ValueError: invalid \\x escape');}
throw new Error(["SyntaxError: (unicode error) 'unicodeescape'"," codec can't decode bytes in position ",i,'-',i+2,": truncated \\xXX escape"].join(''))}
code=parseInt(hex,16);out.push(String.fromCharCode(code));i+=3;continue;default:if(!/[0-8]/.test(escape)){break;}
var r=/[0-8]{1,3}/g;r.lastIndex=i+1;var m=r.exec(str);var oct=m[0];code=parseInt(oct,8);out.push(String.fromCharCode(code));i+=oct.length;continue;}
out.push('\\');}
return out.join('');};var PY_operators={'==':['eq','eq',function(a,b){return a===b;}],'!=':['ne','ne',function(a,b){return a!==b;}],'<>':['ne','ne',function(a,b){return a!==b;}],'<':['lt','gt',function(a,b){return a.__class__.__name__<b.__class__.__name__;}],'<=':['le','ge',function(a,b){return a.__class__.__name__<=b.__class__.__name__;}],'>':['gt','lt',function(a,b){return a.__class__.__name__>b.__class__.__name__;}],'>=':['ge','le',function(a,b){return a.__class__.__name__>=b.__class__.__name__;}],'+':['add','radd'],'-':['sub','rsub'],'*':['mul','rmul'],'/':['div','rdiv'],'//':['floordiv','rfloordiv'],'%':['mod','rmod'],'**':['pow','rpow'],'<<':['lshift','rlshift'],'>>':['rshift','rrshift'],'&':['and','rand'],'^':['xor','rxor'],'|':['or','ror']};var PY_op=function(o1,o2,op){var r;var methods=PY_operators[op];var forward='__'+methods[0]+'__',reverse='__'+methods[1]+'__';var otherwise=methods[2];if(forward in o1&&(r=o1[forward](o2))!==py.NotImplemented){return r;}
if(reverse in o2&&(r=o2[reverse](o1))!==py.NotImplemented){return r;}
if(otherwise){return PY_ensurepy(otherwise(o1,o2));}
throw new Error("TypeError: unsupported operand type(s) for "+op+": '"
+typename(o1)+"' and '"+typename(o2)+"'");};var PY_builtins={type:py.type,None:py.None,True:py.True,False:py.False,NotImplemented:py.NotImplemented,object:py.object,bool:py.bool,float:py.float,str:py.str,unicode:py.unicode,tuple:py.tuple,list:py.list,dict:py.dict,abs:py.abs,len:py.len,isinstance:py.isinstance,issubclass:py.issubclass,classmethod:py.classmethod,};py.parse=function(toks){var index=0;token=toks[0];next=function(){return toks[++index];};return expression();};var evaluate_operator=function(operator,a,b){switch(operator){case'is':return a===b?py.True:py.False;case'is not':return a!==b?py.True:py.False;case'in':return b.__contains__(a);case'not in':return py.PY_isTrue(b.__contains__(a))?py.False:py.True;case'==':case'!=':case'<>':case'<':case'<=':case'>':case'>=':return PY_op(a,b,operator);}
throw new Error('SyntaxError: unknown comparator [['+operator+']]');};py.evaluate=function(expr,context){context=context||{};switch(expr.id){case'(name)':var val=context[expr.value];if(val===undefined&&expr.value in PY_builtins){return PY_builtins[expr.value];}
return PY_ensurepy(val,expr.value);case'(string)':return py.str.fromJSON(PY_decode_string_literal(expr.value,expr.unicode));case'(number)':return py.float.fromJSON(expr.value);case'(constant)':switch(expr.value){case'None':return py.None;case'False':return py.False;case'True':return py.True;}
throw new Error("SyntaxError: unknown constant '"+expr.value+"'");case'(comparator)':var result,left=py.evaluate(expr.expressions[0],context);for(var i=0;i<expr.operators.length;++i){result=evaluate_operator(expr.operators[i],left,left=py.evaluate(expr.expressions[i+1],context));if(py.PY_not(result)){return py.False;}}
return py.True;case'not':return py.PY_isTrue(py.evaluate(expr.first,context))?py.False:py.True;case'and':var and_first=py.evaluate(expr.first,context);if(py.PY_isTrue(and_first.__nonzero__())){return py.evaluate(expr.second,context);}
return and_first;case'or':var or_first=py.evaluate(expr.first,context);if(py.PY_isTrue(or_first.__nonzero__())){return or_first}
return py.evaluate(expr.second,context);case'(':if(expr.second){var callable=py.evaluate(expr.first,context);var args=[],kwargs={};for(var jj=0;jj<expr.second.length;++jj){var arg=expr.second[jj];if(arg.id!=='='){args.push(py.evaluate(arg,context));}else{kwargs[arg.first.value]=py.evaluate(arg.second,context);}}
return py.PY_call(callable,args,kwargs);}
var tuple_exprs=expr.first,tuple_values=[];for(var j=0,len=tuple_exprs.length;j<len;++j){tuple_values.push(py.evaluate(tuple_exprs[j],context));}
return py.tuple.fromJSON(tuple_values);case'[':if(expr.second){return py.PY_getItem(py.evaluate(expr.first,context),py.evaluate(expr.second,context));}
var list_exprs=expr.first,list_values=[];for(var k=0;k<list_exprs.length;++k){list_values.push(py.evaluate(list_exprs[k],context));}
return py.list.fromJSON(list_values);case'{':var dict_exprs=expr.first,dict=py.PY_call(py.dict);for(var l=0;l<dict_exprs.length;++l){py.PY_setItem(dict,py.evaluate(dict_exprs[l][0],context),py.evaluate(dict_exprs[l][1],context));}
return dict;case'.':if(expr.second.id!=='(name)'){throw new Error('SyntaxError: '+expr);}
return py.PY_getAttr(py.evaluate(expr.first,context),expr.second.value);case'~':return(py.evaluate(expr.first,context)).__invert__();case'+':if(!expr.second){return py.PY_positive(py.evaluate(expr.first,context));}
case'-':if(!expr.second){return py.PY_negative(py.evaluate(expr.first,context));}
case'*':case'/':case'//':case'%':case'**':case'<<':case'>>':case'&':case'^':case'|':return PY_op(py.evaluate(expr.first,context),py.evaluate(expr.second,context),expr.id);default:throw new Error('SyntaxError: Unknown node [['+expr.id+']]');}};py.eval=function(str,context){return py.evaluate(py.parse(py.tokenize(str)),context).toJSON();}})(typeof exports==='undefined'?py:exports);;

/* /web/static/src/js/framework/pyeval.js defined in bundle 'website.assets_editor' */
odoo.define('web.pyeval',function(require){"use strict";var core=require('web.core');var session=require('web.session');var utils=require('web.utils');var _t=core._t;var py=window.py;var obj=function(){};obj.prototype=py.object;var asJS=function(arg){if(arg instanceof obj){return arg.toJSON();}
return arg;};var datetime=py.PY_call(py.object);var zero=py.float.fromJSON(0);var DAYS_IN_MONTH=[null,31,28,31,30,31,30,31,31,30,31,30,31];var DAYS_BEFORE_MONTH=[null];var dbm=0;for(var i=1;i<DAYS_IN_MONTH.length;++i){DAYS_BEFORE_MONTH.push(dbm);dbm+=DAYS_IN_MONTH[i];}
function is_leap(year){return year%4===0&&(year%100!==0||year%400===0);}
function days_before_year(year){var y=year-1;return y*365+Math.floor(y/4)-Math.floor(y/100)+Math.floor(y/400);}
function days_in_month(year,month){if(month===2&&is_leap(year)){return 29;}
return DAYS_IN_MONTH[month];}
function days_before_month(year,month){var post_leap_feb=month>2&&is_leap(year);return DAYS_BEFORE_MONTH[month]+(post_leap_feb?1:0);}
function ymd2ord(year,month,day){var dim=days_in_month(year,month);if(!(1<=day&&day<=dim)){throw new Error("ValueError: day must be in 1.."+dim);}
return days_before_year(year)+
days_before_month(year,month)+
day;}
var DI400Y=days_before_year(401);var DI100Y=days_before_year(101);var DI4Y=days_before_year(5);function ord2ymd(n){--n;var n400,n100,n4,n1,n0;utils.divmod(n,DI400Y,function(_n400,n){n400=_n400;utils.divmod(n,DI100Y,function(_n100,n){n100=_n100;utils.divmod(n,DI4Y,function(_n4,n){n4=_n4;utils.divmod(n,365,function(_n1,n){n1=_n1;n0=n;});});});});n=n0;var year=n400*400+1+n100*100+n4*4+n1;if(n1==4||n100==100){utils.assert(n0===0);return{year:year-1,month:12,day:31};}
var leapyear=n1===3&&(n4!==24||n100==3);utils.assert(leapyear==is_leap(year));var month=(n+50)>>5;var preceding=DAYS_BEFORE_MONTH[month]+((month>2&&leapyear)?1:0);if(preceding>n){--month;preceding-=DAYS_IN_MONTH[month]+((month===2&&leapyear)?1:0);}
n-=preceding;return{year:year,month:month,day:n+1};}
function tmxxx(year,month,day,hour,minute,second,microsecond){hour=hour||0;minute=minute||0;second=second||0;microsecond=microsecond||0;if(microsecond<0||microsecond>999999){utils.divmod(microsecond,1000000,function(carry,ms){microsecond=ms;second+=carry;});}
if(second<0||second>59){utils.divmod(second,60,function(carry,s){second=s;minute+=carry;});}
if(minute<0||minute>59){utils.divmod(minute,60,function(carry,m){minute=m;hour+=carry;});}
if(hour<0||hour>23){utils.divmod(hour,24,function(carry,h){hour=h;day+=carry;});}
if(month<1||month>12){utils.divmod(month-1,12,function(carry,m){month=m+1;year+=carry;});}
var dim=days_in_month(year,month);if(day<1||day>dim){if(day===0){--month;if(month>0){day=days_in_month(year,month);}else{--year;month=12;day=31;}}else if(day==dim+1){++month;day=1;if(month>12){month=1;++year;}}else{var r=ord2ymd(ymd2ord(year,month,1)+(day-1));year=r.year;month=r.month;day=r.day;}}
return{year:year,month:month,day:day,hour:hour,minute:minute,second:second,microsecond:microsecond};}
datetime.timedelta=py.type('timedelta',null,{__init__:function(){var args=py.PY_parseArgs(arguments,[['days',zero],['seconds',zero],['microseconds',zero],['milliseconds',zero],['minutes',zero],['hours',zero],['weeks',zero]]);var d=0,s=0,m=0;var days=args.days.toJSON()+args.weeks.toJSON()*7;var seconds=args.seconds.toJSON()
+args.minutes.toJSON()*60
+args.hours.toJSON()*3600;var microseconds=args.microseconds.toJSON()
+args.milliseconds.toJSON()*1000;var daysecondsfrac=utils.modf(days,function(dayfrac,days){d=days;if(dayfrac){return utils.modf(dayfrac*24*3600,function(dsf,dsw){s=dsw;return dsf;});}
return 0;});var secondsfrac=utils.modf(seconds,function(sf,s){seconds=s;return sf+daysecondsfrac;});utils.divmod(seconds,24*3600,function(days,seconds){d+=days;s+=seconds;});microseconds+=secondsfrac*1e6;utils.divmod(microseconds,1000000,function(seconds,microseconds){utils.divmod(seconds,24*3600,function(days,seconds){d+=days;s+=seconds;m+=Math.round(microseconds);});});this.days=d;this.seconds=s;this.microseconds=m;},__str__:function(){var hh,mm,ss;utils.divmod(this.seconds,60,function(m,s){utils.divmod(m,60,function(h,m){hh=h;mm=m;ss=s;});});var s=_.str.sprintf("%d:%02d:%02d",hh,mm,ss);if(this.days){s=_.str.sprintf("%d day%s, %s",this.days,(this.days!=1&&this.days!=-1)?'s':'',s);}
if(this.microseconds){s=_.str.sprintf("%s.%06d",s,this.microseconds);}
return py.str.fromJSON(s);},__eq__:function(other){if(!py.PY_isInstance(other,datetime.timedelta)){return py.False;}
return(this.days===other.days&&this.seconds===other.seconds&&this.microseconds===other.microseconds)?py.True:py.False;},__add__:function(other){if(!py.PY_isInstance(other,datetime.timedelta)){return py.NotImplemented;}
return py.PY_call(datetime.timedelta,[py.float.fromJSON(this.days+other.days),py.float.fromJSON(this.seconds+other.seconds),py.float.fromJSON(this.microseconds+other.microseconds)]);},__radd__:function(other){return this.__add__(other);},__sub__:function(other){if(!py.PY_isInstance(other,datetime.timedelta)){return py.NotImplemented;}
return py.PY_call(datetime.timedelta,[py.float.fromJSON(this.days-other.days),py.float.fromJSON(this.seconds-other.seconds),py.float.fromJSON(this.microseconds-other.microseconds)]);},__rsub__:function(other){if(!py.PY_isInstance(other,datetime.timedelta)){return py.NotImplemented;}
return this.__neg__().__add__(other);},__neg__:function(){return py.PY_call(datetime.timedelta,[py.float.fromJSON(-this.days),py.float.fromJSON(-this.seconds),py.float.fromJSON(-this.microseconds)]);},__pos__:function(){return this;},__mul__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
var n=other.toJSON();return py.PY_call(datetime.timedelta,[py.float.fromJSON(this.days*n),py.float.fromJSON(this.seconds*n),py.float.fromJSON(this.microseconds*n)]);},__rmul__:function(other){return this.__mul__(other);},__div__:function(other){if(!py.PY_isInstance(other,py.float)){return py.NotImplemented;}
var usec=((this.days*24*3600)+this.seconds)*1000000
+this.microseconds;return py.PY_call(datetime.timedelta,[zero,zero,py.float.fromJSON(usec/other.toJSON())]);},__floordiv__:function(other){return this.__div__(other);},total_seconds:function(){return py.float.fromJSON(this.days*86400
+this.seconds
+this.microseconds/1000000);},__nonzero__:function(){return(!!this.days||!!this.seconds||!!this.microseconds)?py.True:py.False;}});datetime.datetime=py.type('datetime',null,{__init__:function(){var zero=py.float.fromJSON(0);var args=py.PY_parseArgs(arguments,['year','month','day',['hour',zero],['minute',zero],['second',zero],['microsecond',zero],['tzinfo',py.None]]);for(var key in args){if(!args.hasOwnProperty(key)){continue;}
this[key]=asJS(args[key]);}},replace:function(){var args=py.PY_parseArgs(arguments,[['year',py.None],['month',py.None],['day',py.None],['hour',py.None],['minute',py.None],['second',py.None],['microsecond',py.None]]);var params={};for(var key in args){if(!args.hasOwnProperty(key)){continue;}
var arg=args[key];params[key]=(arg===py.None?this[key]:asJS(arg));}
return py.PY_call(datetime.datetime,params);},strftime:function(){var self=this;var args=py.PY_parseArgs(arguments,'format');return py.str.fromJSON(args.format.toJSON().replace(/%([A-Za-z])/g,function(m,c){switch(c){case'Y':return _.str.sprintf('%04d',self.year);case'm':return _.str.sprintf('%02d',self.month);case'd':return _.str.sprintf('%02d',self.day);case'H':return _.str.sprintf('%02d',self.hour);case'M':return _.str.sprintf('%02d',self.minute);case'S':return _.str.sprintf('%02d',self.second);}
throw new Error('ValueError: No known conversion for '+m);}));},now:py.classmethod.fromJSON(function(){var d=new Date();return py.PY_call(datetime.datetime,[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()*1000]);}),today:py.classmethod.fromJSON(function(){var dt_class=py.PY_getAttr(datetime,'datetime');return py.PY_call(py.PY_getAttr(dt_class,'now'));}),utcnow:py.classmethod.fromJSON(function(){var d=new Date();return py.PY_call(datetime.datetime,[d.getUTCFullYear(),d.getUTCMonth()+1,d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()*1000]);}),combine:py.classmethod.fromJSON(function(){var args=py.PY_parseArgs(arguments,'date time');return py.PY_call(datetime.datetime,[py.PY_getAttr(args.date,'year'),py.PY_getAttr(args.date,'month'),py.PY_getAttr(args.date,'day'),py.PY_getAttr(args.time,'hour'),py.PY_getAttr(args.time,'minute'),py.PY_getAttr(args.time,'second')]);}),toJSON:function(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.microsecond/1000);},});datetime.date=py.type('date',null,{__init__:function(){var args=py.PY_parseArgs(arguments,'year month day');this.year=asJS(args.year);this.month=asJS(args.month);this.day=asJS(args.day);},strftime:function(){var self=this;var args=py.PY_parseArgs(arguments,'format');return py.str.fromJSON(args.format.toJSON().replace(/%([A-Za-z])/g,function(m,c){switch(c){case'Y':return self.year;case'm':return _.str.sprintf('%02d',self.month);case'd':return _.str.sprintf('%02d',self.day);}
throw new Error('ValueError: No known conversion for '+m);}));},__eq__:function(other){return(this.year===other.year&&this.month===other.month&&this.day===other.day)?py.True:py.False;},replace:function(){var args=py.PY_parseArgs(arguments,[['year',py.None],['month',py.None],['day',py.None]]);var params={};for(var key in args){if(!args.hasOwnProperty(key)){continue;}
var arg=args[key];params[key]=(arg===py.None?this[key]:asJS(arg));}
return py.PY_call(datetime.date,params);},__add__:function(other){if(!py.PY_isInstance(other,datetime.timedelta)){return py.NotImplemented;}
var s=tmxxx(this.year,this.month,this.day+other.days);return datetime.date.fromJSON(s.year,s.month,s.day);},__radd__:function(other){return this.__add__(other);},__sub__:function(other){if(py.PY_isInstance(other,datetime.timedelta)){return py.PY_add(this,py.PY_negative(other));}
if(py.PY_isInstance(other,datetime.date)){return py.PY_call(datetime.timedelta,[py.PY_subtract(py.PY_call(py.PY_getAttr(this,'toordinal')),py.PY_call(py.PY_getAttr(other,'toordinal')))]);}
return py.NotImplemented;},toordinal:function(){return py.float.fromJSON(ymd2ord(this.year,this.month,this.day));},weekday:function(){return py.float.fromJSON((this.toordinal().toJSON()+6)%7);},fromJSON:function(year,month,day){return py.PY_call(datetime.date,[year,month,day]);},today:py.classmethod.fromJSON(function(){var d=new Date();return py.PY_call(datetime.date,[d.getFullYear(),d.getMonth()+1,d.getDate()]);}),});function context_today(){var d=new Date();return py.PY_call(datetime.date,[d.getFullYear(),d.getMonth()+1,d.getDate()]);}
datetime.time=py.type('time',null,{__init__:function(){var zero=py.float.fromJSON(0);var args=py.PY_parseArgs(arguments,[['hour',zero],['minute',zero],['second',zero],['microsecond',zero],['tzinfo',py.None]]);for(var k in args){if(!args.hasOwnProperty(k)){continue;}
this[k]=asJS(args[k]);}}});var time=py.PY_call(py.object);time.strftime=py.PY_def.fromJSON(function(){var args=py.PY_parseArgs(arguments,'format');var dt_class=py.PY_getAttr(datetime,'datetime');var d=py.PY_call(py.PY_getAttr(dt_class,'utcnow'));return py.PY_call(py.PY_getAttr(d,'strftime'),[args.format]);});var args=_.map(('year month day '
+'years months weeks days '
+'weekday leapdays yearday nlyearday').split(' '),function(arg){switch(arg){case'years':case'months':case'days':case'leapdays':case'weeks':return[arg,zero];case'year':case'month':case'day':case'weekday':case'yearday':case'nlyearday':return[arg,null];default:throw new Error("Unknown relativedelta argument "+arg);}});args.unshift('*');var _utils={monthrange:function(year,month){if(month<1||month>12){throw new Error("Illegal month "+month);}
var day1=this.weekday(year,month,1);var ndays=this.mdays[month]+(month==this.February&&this.isleap(year));return[day1,ndays];},weekday:function(year,month,day){var date=py.PY_call(datetime.date,[year,month,day]);return py.PY_call(py.PY_getAttr(date,'weekday'));},isleap:function(year){return year%4===0&&(year%100!==0||year%400===0)},mdays:[0,31,28,31,30,31,30,31,31,30,31,30,31],January:1,February:2};var relativedelta=py.type('relativedelta',null,{__init__:function(){this.ops=py.PY_parseArgs(arguments,args);this.ops.days=py.float.fromJSON(asJS(this.ops.days)+asJS(this.ops.weeks)*7);var yday=zero;if(this.ops.nlyearday){yday=this.ops.nlyearday;}else if(this.ops.yearday){yday=this.ops.yearday;if(asJS(this.ops.yearday)>59){this.ops.leapdays=py.float.fromJS(-1);}}
if(py.PY_isTrue(yday)){var ydayidx=[31,59,90,120,151,181,212,243,273,304,334,366];for(var idx=0;idx<ydayidx.length;++idx){var ydays=ydayidx[idx];if(asJS(yday)<=ydays){this.ops.month=py.float.fromJSON(idx+1);if(!idx){this.ops.day=yday;}else{this.ops.day=py.PY_subtract(yday,py.float.fromJSON(ydayidx[idx-1]));}
break;}}
if(idx===ydayidx.length){throw new Error("Invalid year day ("+asJS(yday)+")");}}
this._fix();},_fix:function(){var months=asJS(this.ops.months);if(Math.abs(months)>11){var s=months>0?1:-1;var r=utils.divmod(months*s,12);this.ops.months=py.float.fromJSON(r.mod*s);this.ops.years=py.float.fromJSON(asJS(this.ops.years)+r.div*s);}
this._has_time=0;},__add__:function(other){if(!py.PY_isInstance(other,datetime.date)){return py.NotImplemented;}
var year=(asJS(this.ops.year)||asJS(other.year))+asJS(this.ops.years);var month=asJS(this.ops.month)||asJS(other.month);var months;if(months=asJS(this.ops.months)){if(Math.abs(months)<1||Math.abs(months)>12){throw new Error("Can only use relative months between -12 and +12");}
month+=months;if(month>12){year+=1;month-=12;}
if(month<1){year-=1;month+=12;}}
var day=Math.min(_utils.monthrange(year,month)[1],asJS(this.ops.day)||asJS(other.day));var repl={year:py.float.fromJSON(year),month:py.float.fromJSON(month),day:py.float.fromJSON(day)};var days=asJS(this.ops.days);if(py.PY_isTrue(this.ops.leapdays)&&month>2&&_utils.isleap(year)){days+=asJS(this.ops.leapdays);}
var ret=py.PY_add(py.PY_call(py.PY_getAttr(other,'replace'),repl),py.PY_call(datetime.timedelta,{days:py.float.fromJSON(days)}));if(this.ops.weekday){var weekday=asJS(this.ops.weekday),nth=1;var jumpdays=(Math.abs(nth)-1)*7;var ret_weekday=asJS(py.PY_call(py.PY_getAttr(ret,'weekday')));if(nth>0){jumpdays+=(7-ret_weekday+weekday)%7;}else{jumpdays+=(ret_weekday-weekday)%7;jumpdays*=-1;}
ret=py.PY_add(ret,py.PY_call(datetime.timedelta,{days:py.float.fromJSON(jumpdays)}));}
return ret;},__radd__:function(other){return this.__add__(other);},__rsub__:function(other){return this.__neg__().__radd__(other);},__neg__:function(){return py.PY_call(relativedelta,{years:py.PY_negative(this.ops.years),months:py.PY_negative(this.ops.months),days:py.PY_negative(this.ops.days),leapdays:this.ops.leapdays,year:this.ops.year,month:this.ops.month,day:this.ops.day,weekday:this.ops.weekday});}});function wrap(value){if(value===null){return py.None;}
switch(typeof value){case'undefined':throw new Error("No conversion for undefined");case'boolean':return py.bool.fromJSON(value);case'number':return py.float.fromJSON(value);case'string':return py.str.fromJSON(value);}
switch(value.constructor){case Object:return wrapping_dict.fromJSON(value);case Array:return wrapping_list.fromJSON(value);}
throw new Error("ValueError: unable to wrap "+value);}
var wrapping_dict=py.type('wrapping_dict',null,{__init__:function(){this._store={};},__getitem__:function(key){var k=key.toJSON();if(!(k in this._store)){throw new Error("KeyError: '"+k+"'");}
return wrap(this._store[k]);},__getattr__:function(key){return this.__getitem__(py.str.fromJSON(key));},__len__:function(){return Object.keys(this._store).length},__nonzero__:function(){return py.PY_size(this)>0?py.True:py.False;},get:function(){var args=py.PY_parseArgs(arguments,['k',['d',py.None]]);if(!(args.k.toJSON()in this._store)){return args.d;}
return this.__getitem__(args.k);},fromJSON:function(d){var instance=py.PY_call(wrapping_dict);instance._store=d;return instance;},toJSON:function(){return this._store;},});var wrapping_list=py.type('wrapping_list',null,{__init__:function(){this._store=[];},__getitem__:function(index){return wrap(this._store[index.toJSON()]);},__len__:function(){return this._store.length;},__nonzero__:function(){return py.PY_size(this)>0?py.True:py.False;},fromJSON:function(ar){var instance=py.PY_call(wrapping_list);instance._store=ar;return instance;},toJSON:function(){return this._store;},});function wrap_context(context){for(var k in context){if(!context.hasOwnProperty(k)){continue;}
var val=context[k];if(val===null){continue;}
if(val.constructor===Array){context[k]=wrapping_list.fromJSON(val);}else if(val.constructor===Object&&!py.PY_isInstance(val,py.object)){context[k]=wrapping_dict.fromJSON(val);}}
return context;}
function eval_contexts(contexts,evaluation_context){evaluation_context=_.extend(pycontext(),evaluation_context||{});return _(contexts).reduce(function(result_context,ctx){if(_.isEmpty(ctx)){return result_context;}
if(_.isString(ctx)){ctx={__ref:'context',__debug:ctx};}
var evaluated=ctx;switch(ctx.__ref){case'context':evaluation_context.context=evaluation_context;evaluated=py.eval(ctx.__debug,wrap_context(evaluation_context));break;case'compound_context':var eval_context=eval_contexts([ctx.__eval_context]);evaluated=eval_contexts(ctx.__contexts,_.extend({},evaluation_context,eval_context));break;}
_.extend(evaluation_context,evaluated);return _.extend(result_context,evaluated);},{});}
function eval_domains(domains,evaluation_context){evaluation_context=_.extend(pycontext(),evaluation_context||{});var result_domain=[];var need_normalization=(domains&&domains.length>0&&domains[0].length===1&&(domains[0][0]==="|"||domains[0][0]==="!"));_(domains).each(function(domain){if(_.isString(domain)){domain={__ref:'domain',__debug:domain};}
var domain_array_to_combine;switch(domain.__ref){case'domain':evaluation_context.context=evaluation_context;domain_array_to_combine=py.eval(domain.__debug,wrap_context(evaluation_context));break;case'compound_domain':var eval_context=eval_contexts([domain.__eval_context]);domain_array_to_combine=eval_domains(domain.__domains,_.extend({},evaluation_context,eval_context));break;default:domain_array_to_combine=domain;}
if(need_normalization){domain_array_to_combine=get_normalized_domain(domain_array_to_combine);}
result_domain.push.apply(result_domain,domain_array_to_combine);});return result_domain;}
function get_normalized_domain(domain_array){var expected=1;_.each(domain_array,function(item){if(item==="&"||item==="|"){expected++;}else if(item!=="!"){expected--;}});var new_explicit_ands=_.times(-expected,_.constant("&"));return new_explicit_ands.concat(domain_array);}
function eval_groupbys(contexts,evaluation_context){evaluation_context=_.extend(pycontext(),evaluation_context||{});var result_group=[];_(contexts).each(function(ctx){if(_.isString(ctx)){ctx={__ref:'context',__debug:ctx};}
var group;var evaluated=ctx;switch(ctx.__ref){case'context':evaluation_context.context=evaluation_context;evaluated=py.eval(ctx.__debug,wrap_context(evaluation_context));break;case'compound_context':var eval_context=eval_contexts([ctx.__eval_context]);evaluated=eval_contexts(ctx.__contexts,_.extend({},evaluation_context,eval_context));break;}
group=evaluated.group_by;if(!group){return;}
if(typeof group==='string'){result_group.push(group);}else if(group instanceof Array){result_group.push.apply(result_group,group);}else{throw new Error('Got invalid groupby {{'
+JSON.stringify(group)+'}}');}
_.extend(evaluation_context,evaluated);});return result_group;}
function pycontext(){return _.extend({datetime:datetime,context_today:context_today,time:time,relativedelta:relativedelta,current_date:py.PY_call(time.strftime,[py.str.fromJSON('%Y-%m-%d')]),},session.user_context);}
function pyeval(type,object,context,options){options=options||{};context=_.extend(pycontext(),context||{});switch(type){case'context':case'contexts':if(type==='context')
object=[object];return eval_contexts((options.no_user_context?[]:[session.user_context]).concat(object),context);case'domain':case'domains':if(type==='domain')
object=[object];return eval_domains(object,context);case'groupbys':return eval_groupbys(object,context);}
throw new Error("Unknow evaluation type "+type);}
function eval_arg(arg){if(typeof arg!=='object'||!arg.__ref){return arg;}
switch(arg.__ref){case'domain':case'compound_domain':return pyeval('domains',[arg]);case'context':case'compound_context':return pyeval('contexts',[arg]);default:throw new Error(_t("Unknown nonliteral type ")+' '+arg.__ref);}}
function ensure_evaluated(args,kwargs){for(var i=0;i<args.length;++i){args[i]=eval_arg(args[i]);}
for(var k in kwargs){if(!kwargs.hasOwnProperty(k)){continue;}
kwargs[k]=eval_arg(kwargs[k]);}}
function eval_domains_and_contexts(source){return new $.Deferred(function(d){setTimeout(function(){var result;try{result=sync_eval_domains_and_contexts(source);}
catch(e){result={error:{code:400,message:_t("Evaluation Error"),data:{type:'local_exception',debug:_.str.sprintf(_t("Local evaluation failure\n%s\n\n%s"),e.message,JSON.stringify(source))}}};}
d.resolve(result);},0);});}
function sync_eval_domains_and_contexts(source){var contexts=([session.user_context]||[]).concat(source.contexts);return{context:pyeval('contexts',contexts),domain:pyeval('domains',source.domains),group_by:pyeval('groupbys',source.group_by_seq||[])};}
function py_eval(expr,context){return py.eval(expr,_.extend({},context||{},{"true":true,"false":false,"null":null}));}
return{context:pycontext,ensure_evaluated:ensure_evaluated,eval:pyeval,eval_domains_and_contexts:eval_domains_and_contexts,sync_eval_domains_and_contexts:sync_eval_domains_and_contexts,py_eval:py_eval,};});;

/* /website_forum/static/src/js/website_tour_forum.js defined in bundle 'website.assets_editor' */
odoo.define("website_forum.tour_forum",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var base=require("web_editor.base");var _t=core._t;tour.register("question",{url:"/",wait_for:base.ready(),},[tour.STEPS.WEBSITE_NEW_PAGE,{trigger:"a[data-action=new_forum]",content:_t("Select this menu item to create a new forum."),position:"bottom",},{trigger:"#editor_new_forum input[type=text]",content:_t("Enter a name for your new forum."),position:"right",},{trigger:"button.btn-primary",extra_trigger:".modal #editor_new_forum input[type=text]:not(:propValue(\"\"))",content:_t("Click <em>Continue</em> to create the forum."),position:"right",},{trigger:".btn-block a:first",position:"left",content:_t("Ask the question in this forum by clicking on the button."),},{trigger:"input[name=post_name]",position:"top",content:_t("Give your question title."),},{trigger:".note-editable p",extra_trigger:"input[name=post_name]:not(:propValue(\"\"))",content:_t("Put your question here."),position:"bottom",run:"text",},{trigger:".select2-choices",extra_trigger:".note-editable p:not(:containsExact(\"<br>\"))",content:_t("Insert tags related to your question."),position:"top",run:function(actions){actions.auto("input[id=s2id_autogen2]");},},{trigger:"button:contains(\"Post Your Question\")",extra_trigger:"input[id=s2id_autogen2]:not(:propValue(\"Tags\"))",content:_t("Click to post your question."),position:"bottom",},{trigger:".modal-header button.close",auto:true,},{trigger:".note-editable p",content:_t("Put your answer here."),position:"bottom",run:"text",},{trigger:"button:contains(\"Post Answer\")",extra_trigger:".note-editable p:not(:containsExact(\"<br>\"))",content:_t("Click to post your answer."),position:"bottom",},{trigger:".modal-header button.close",auto:true,},{trigger:"a[data-karma=\"20\"]:first",content:_t("Click here to accept this answer."),position:"right",}]);});;

/* /website_forum/static/src/js/website_forum.editor.js defined in bundle 'website.assets_editor' */
odoo.define('website_forum.editor',function(require){"use strict";var core=require('web.core');var contentMenu=require('website.contentMenu');var website=require('website.website');var _t=core._t;contentMenu.TopBar.include({new_forum:function(){website.prompt({id:"editor_new_forum",window_title:_t("New Forum"),input:"Forum Name",init:function(){var $group=this.$dialog.find("div.form-group");$group.removeClass("mb0");var $add=$('<div class="form-group mb0">'+'<label class="col-sm-offset-3 col-sm-9 text-left">'+'    <input type="checkbox" required="required"/> '+'</label>'+'</div>');$add.find('label').append(_t("Add page in menu"));$group.after($add);}}).then(function(forum_name,field,$dialog){var add_menu=($dialog.find('input[type="checkbox"]').is(':checked'));website.form('/forum/new','POST',{forum_name:forum_name,add_menu:add_menu||""});});},});});